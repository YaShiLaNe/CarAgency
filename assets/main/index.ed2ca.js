System.register("chunks:///_virtual/Audio_Action_Control.ts",["./rollupPluginModLoBabelHelpers.js","cc","./hero.ts"],(function(n){"use strict";var o,e,t,l,i,r,a,u,s,C,c,p,_,m,g,h,y;return{setters:[function(n){o=n.applyDecoratedDescriptor,e=n.inheritsLoose,t=n.initializerDefineProperty,l=n.assertThisInitialized},function(n){i=n.cclegacy,r=n._decorator,a=n.find,u=n.Collider,s=n.AudioSource,C=n.WebView,c=n.SkeletalAnimation,p=n.math,_=n.Button,m=n.Label,g=n.color,h=n.Component},function(n){y=n.Hero}],execute:function(){var d,f,v,V,b;i._RF.push({},"7f5430jupZHI7dZB76XWDDm","Audio_Action_Control",void 0);var S=r.ccclass,D=r.property;n("Audio_Action_Control",S("Audio_Action_Control")((v=o((f=function(n){function o(){for(var o,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return o=n.call.apply(n,[this].concat(i))||this,t(o,"Dance_Panel",v,l(o)),t(o,"Web_Panel",V,l(o)),t(o,"Counsellor_Terry_situation",b,l(o)),o.Counsellor_Girl_situation=!1,o.SR_Girl_Cayenne_situation=!1,o.Dancer_situation=!1,o.out_ditai=!0,o.out_SR=!0,o}e(o,n);var i=o.prototype;return i.start=function(){this.Animation_Change()},i.update=function(){var n;"false"==this.Dance_Panel&&null!=(n=a("VirtualControl/isDance"))&&n.active.valueOf()&&(a("VirtualControl/isDance").active=!1)},i.onLoad=function(){var n,o;null==(n=this.node.getComponent(u))||n.on("onTriggerEnter",this.collision_exploration,this),null==(o=this.node.getComponent(u))||o.on("onTriggerExit",this.Exit_collision_exploration,this)},i.collision_exploration=function(n){var o,e,t,l,i,r,u,p,_,m,g=this;"Counsellor_Terry<BoxCollider>"==n.otherCollider.name&&(console.log(n.selfCollider.name+"   touched   "+n.otherCollider.name),this.Counsellor_Terry_situation=!0,null==(o=a("Counsellor_Terry"))||null==(e=o.getComponent(s))||e.play(),a("VirtualShop").getComponent(s).volume=.3);"Counsellor_Girl<BoxCollider>"==n.otherCollider.name&&(console.log(n.selfCollider.name+"   touched   "+n.otherCollider.name),this.Counsellor_Girl_situation=!0,null==(t=a("Counsellor_Girl"))||null==(l=t.getComponent(s))||l.play(),a("VirtualShop").getComponent(s).volume=.3);"SR_Girl_Cayenne<BoxCollider>"==n.otherCollider.name&&(console.log(n.selfCollider.name+"   touched   "+n.otherCollider.name),this.SR_Girl_Cayenne_situation=!0,this.out_SR=!1,null==(i=a("SR_Girl_Cayenne"))||null==(r=i.getComponent(s))||r.play(),a("VirtualShop").getComponent(s).volume=.3,this.Web_Panel="true",console.log("true"),a("VirtualControl/Web_Cayenne").getComponent(C).url="https://1000ride.cn/cocos/Shopping/car_webpage/Cayenne",setTimeout((function(){console.log("do"),0==g.out_SR&&(a("VirtualControl/isEnter_Web_Cayenne").active=!0)}),1e3));"Ditai<BoxCollider>"==n.otherCollider.name&&(console.log(n.selfCollider.name+"   touched   "+n.otherCollider.name),this.Dancer_situation=!0,this.out_ditai=!1,null==(u=a("Dancer"))||null==(p=u.getComponent(c))||p.play("Base_Layer"),null==(_=a("Dancer"))||null==(m=_.getComponent(s))||m.play(),a("VirtualShop").getComponent(s).volume=.3,this.Dance_Panel="true",setTimeout((function(){0==g.out_ditai&&(a("VirtualControl/isDance").active=!0)}),5e3))},i.Exit_collision_exploration=function(n){var e,t,l,i,r,u,C,p,_,m,g,h;(null==(e=a("DancePlace/Ditai"))||null==(t=e.getComponent(s))||t.stop(),null==(l=a("Dancer"))||null==(i=l.getComponent(s))||i.stop(),null==(r=a("Counsellor_Terry"))||null==(u=r.getComponent(s))||u.stop(),null==(C=a("Counsellor_Girl"))||null==(p=C.getComponent(s))||p.stop(),null==(_=a("SR_Girl_Cayenne"))||null==(m=_.getComponent(s))||m.stop(),a("VirtualShop").getComponent(s).volume=1,1==this.Dancer_situation)&&(null==(g=a("Dancer"))||null==(h=g.getComponent(c))||h.play("dance"),this.Dancer_situation=!1);this.out_ditai=!0,this.out_SR=!0,a("Customer").getComponent(y).idle_anim="idle1122",console.log("angle  "+(Math.atan2(a("Customer").position.x-a("Counsellor_Terry").position.z,a("Customer").position.x-a("Counsellor_Terry").position.x)/Math.PI*180+90)),this.Web_Cayenne_mention_back(),a("Customer").getComponent(o).Web_Panel="false",a("Customer").getComponent(o).Dance_Panel="false"},i.Animation_Change=function(){var n=this,o=["Base_Layer","stand_idle"];setInterval((function(){if(0==n.Counsellor_Terry_situation){var e,t,l=Math.round(1*p.random()+0);null==(e=a("Counsellor_Terry"))||null==(t=e.getComponent(c))||t.play(o[l])}}),16400),setInterval((function(){var e,t;0==n.Counsellor_Girl_situation&&(null==(e=a("Counsellor_Girl"))||null==(t=e.getComponent(c))||t.play(o[Math.round(1*p.random()+0)]))}),12300),setInterval((function(){var e,t;0==n.SR_Girl_Cayenne_situation&&(null==(e=a("SR_Girl_Cayenne"))||null==(t=e.getComponent(c))||t.play(o[Math.round(1*p.random()+0)]))}),8200)},i.Toward_to_Player=function(){var n,o,e;a("Customer").position.x,a("Customer").position.y,a("Customer").position.z;null==(n=a("SR_Girl_Cayenne"))||n.lookAt(a("Customer").position),null==(o=a("Counsellor_Terry"))||o.lookAt(a("Customer").position),null==(e=a("Counsellor_Girl"))||e.lookAt(a("Customer").position),console.log(this.node.name+"Position  "+a("Customer").position)},i.Start_Setting=function(){a("VirtualControl/Mention/Button").getComponent(_).interactable=!1,a("VirtualControl/Mention/Button/Label").getComponent(m).color=g(160,160,160),setTimeout((function(){var n,o,e,t;a("VirtualControl/Mention/Button").active=!0,a("VirtualControl/Mention/Button_fake").active=!1,a("VirtualControl/Mention/Button").getComponent(_).interactable=!0,a("VirtualControl/Mention/Button/Label").getComponent(m).string="OK",a("VirtualControl/Mention/Button/Label").getComponent(m).color=g(255,255,255),null==(n=a("VirtualShop"))||null==(o=n.getComponent(s))||o.pause(),null==(e=a("VirtualShop"))||null==(t=e.getComponent(s))||t.play()}),5e3)},i.Enter_Game=function(){var n,o,e,t;null==(n=a("VirtualShop"))||null==(o=n.getComponent(s))||o.pause(),null==(e=a("VirtualShop"))||null==(t=e.getComponent(s))||t.play(),a("VirtualControl/Mention").active=!1,a("VirtualControl/JoyStick").active=!0},i.BGM_for_ios=function(){var n,o,e,t;a("VirtualControl/Mention/Button_c").active=!1,null==(n=a("VirtualShop"))||null==(o=n.getComponent(s))||o.pause(),null==(e=a("VirtualShop"))||null==(t=e.getComponent(s))||t.play()},i.Web_Cayenne_mention_back=function(){a("VirtualControl/isEnter_Web_Cayenne").active=!1},i.Web_Cayenne_Open=function(){a("VirtualControl/isEnter_Web_Cayenne").active=!1,a("VirtualShop").getComponent(s).volume=0,a("VirtualControl/Web_Cayenne").active=!0},i.Web_Cayenne_Close=function(){a("VirtualControl/Web_Cayenne").active=!1,a("VirtualControl/Web_Cayenne").getComponent(C).url="https://1000ride.cn",a("VirtualShop").getComponent(s).volume=1},i.Dance_accept=function(){var n,o,e,t,l;a("VirtualControl/isDance").active=!1,a("Customer").getComponent(y).idle_anim="dance",null==(n=a("Customer_UBA").getComponent(c))||n.play("dance"),null==(o=a("Dancer"))||null==(e=o.getComponent(c))||e.play("dance"),null==(t=a("DancePlace/Ditai"))||null==(l=t.getComponent(s))||l.play(),a("VirtualShop").getComponent(s).volume=0},i.Dance_refuse=function(){var n,o;a("VirtualControl/isDance").active=!1,null==(n=a("Dancer"))||null==(o=n.getComponent(c))||o.play("dance")},o}(h)).prototype,"Dance_Panel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"false"}}),V=o(f.prototype,"Web_Panel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"false"}}),b=o(f.prototype,"Counsellor_Terry_situation",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=f))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/buoyancy-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gerstner.ts"],(function(e){"use strict";var t,n,r,a,i,o,s,l,c,u,y,p,f,w,b,v,g,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.Vec3,c=e.Mat4,u=e.Quat,y=e.Material,p=e.Node,f=e.Vec4,w=e.director,b=e.PhysicsSystem,v=e.clamp01,g=e.lerp,h=e.Component},function(e){d=e.gerstnerWaves}],execute:function(){var m,D,M,O,j,z,_,P,x,I,F;o._RF.push({},"a1e9eEKELJEkpbmjlI8hZrf","buoyancy-manager",void 0);var S=s.ccclass,E=s.property,T=s.type,V=new l,k=(new l,new l),B=new l,L=new c,U=new l,W=new l,A=new u;e("BuoyancyManager",(m=S("BuoyancyManager"),D=T(y),M=T(p),m(((F=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"waterMaterial",z,a(t)),r(t,"water",_,a(t)),r(t,"waterDensity",P,a(t)),t.buoyancyObjects=[],r(t,"waveForce",x,a(t)),r(t,"waveOffset",I,a(t)),t.visuals=new f,t.directions=new f,t}n(t,e);var o=t.prototype;return o.addObject=function(e){-1===this.buoyancyObjects.indexOf(e)&&this.buoyancyObjects.push(e)},o.removeObject=function(e){var t=this.buoyancyObjects.indexOf(e);-1!==t&&this.buoyancyObjects.splice(t,1)},o.__preload=function(){t._instance=this},o.onDestroy=function(){t._instance=null},o.start=function(){if(this.waterMaterial){var e=this.waterMaterial.getProperty("waveVisuals");e&&this.visuals.set(e);var t=this.waterMaterial.getProperty("waveDirections");t&&this.directions.set(t)}},o.update=function(e){for(var t,n=null==(t=w.root)?void 0:t.cumulativeTime,r=b.instance.gravity.y,a=this.waterDensity,i=this.buoyancyObjects,o=0;o<i.length;o++){var s=i[o],y=s.body;if(y){for(var p=s.points,f=a/s.density*s.body.mass*-r/p.length,h=0,m=0;m<p.length;m++){var D,M=p[m],O=M.node.worldPosition,j=k;j.set(O.x,null==(D=this.water)?void 0:D.worldPosition.y,O.z),d(j,this.visuals,this.directions,n,U,W),j.add(U);var z=j.y-O.y+M.voxelSize/2,_=v(z/M.voxelSize);h+=_,u.fromViewUp(A,l.UP,W),u.slerp(A,A,u.IDENTITY,_),B.set(l.UP),B.multiplyScalar(f*_),l.transformQuat(B,B,A),c.invert(L,y.node.worldMatrix);var P=l.transformMat4(V,O,L);y.applyForce(B,P)}h/=p.length,y.linearDamping=g(s.initDrag,s.dragInWater,h),y.angularDamping=g(s.initAngularDrag,s.angularDragInWater,h)}}},i(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(h))._instance=null,z=t((j=F).prototype,"waterMaterial",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(j.prototype,"water",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(j.prototype,"waterDensity",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=t(j.prototype,"waveForce",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),I=t(j.prototype,"waveOffset",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=j))||O));o._RF.pop()}}}));

System.register("chunks:///_virtual/buoyancy-object.ts",["./rollupPluginModLoBabelHelpers.js","cc","./buoyancy-manager.ts","./buoyancy-point.ts"],(function(n){"use strict";var t,e,i,r,a,o,c,u,s,l;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,c=n.RigidBody,u=n.Component},function(n){s=n.BuoyancyManager},function(n){l=n.BuoyancyPoint}],execute:function(){var y,p,b,g,d;a._RF.push({},"65ff0VdcydJe6kj0H3E7osn","buoyancy-object",void 0);var f=o.ccclass,h=o.property;n("BuoyancyObject",f("BuoyancyObject")((b=t((p=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a))||this,i(t,"density",b,r(t)),i(t,"dragInWater",g,r(t)),i(t,"angularDragInWater",d,r(t)),t.points=[],t.body=null,t.initDrag=0,t.initAngularDrag=0,t}e(t,n);var a=t.prototype;return a.onEnable=function(){s.instance&&s.instance.addObject(this),this.points=this.getComponentsInChildren(l),this.body=this.getComponent(c),this.body&&(this.initDrag=this.body.linearDamping,this.initAngularDrag=this.body.angularDamping)},a.onDisable=function(){s.instance&&s.instance.removeObject(this)},t}(u)).prototype,"density",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.75}}),g=t(p.prototype,"dragInWater",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=t(p.prototype,"angularDragInWater",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=p))||y);a._RF.pop()}}}));

System.register("chunks:///_virtual/buoyancy-point.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,o,c,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,a=e.Component}],execute:function(){var u,l,p,s;o._RF.push({},"fd99dD8pG1EFrFa0MtWL2a1","buoyancy-point",void 0);var y=c.ccclass,f=c.property;e("BuoyancyPoint",y("BuoyancyPoint")((p=t((l=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,i(t,"forceMultiply",p,n(t)),i(t,"voxelSize",s,n(t)),t}return r(t,e),t}(a)).prototype,"forceMultiply",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),s=t(l.prototype,"voxelSize",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u=l))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/button-to-toggle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,i,r,l,c,g,s,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,c=t.Toggle,g=t.Node,s=t.Button,a=t.Component}],execute:function(){var u,p,h,f,d;r._RF.push({},"5bf5eeCKY5Az4a5MEEQZzAo","button-to-toggle",void 0);var y=l.ccclass,T=l.type;t("ButtonToToggle",(u=y("ButtonToToggle"),p=T(c),u((d=e((f=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"toggle",d,i(e)),e}o(e,t);var r=e.prototype;return r.start=function(){this.node.on(g.EventType.TOUCH_END,this.changeToggle,this)},r.changeToggle=function(){var t=this.node.getComponent(s);t&&t.interactable&&this.toggle&&(this.toggle.isChecked=!this.toggle.isChecked)},e}(a)).prototype,"toggle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/CarLightTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Layer3D.ts","./PEFX_Depth.ts","./PEFX_Final.ts","./PEFX_Glow.ts","./PEFX_GrabScene.ts","./PostEFXMgr.ts"],(function(t){"use strict";var n,e,i,r,s,a,o,c,u,l,E,f;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,r=t.find,s=t.Camera,a=t.Component},function(t){o=t.Layer3D},function(t){c=t.PEFX_Depth},function(t){u=t.PEFX_Final},function(t){l=t.PEFX_Glow},function(t){E=t.PEFX_GrabScene},function(t){f=t.PostEFXMgr}],execute:function(){var p;e._RF.push({},"77711Scwv5I16G2q+TR3CvT","CarLightTest",void 0);var F=i.ccclass;i.property,t("CarLightTest",F("CarLightTest")(p=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){var t=r("CameraTarget/Main Camera").getComponent(s);t.visibility&=~o.UI_3D.mask;var n=[c,E,l,u];f.inst.setup(n,t,(function(){f.inst.setEfxEnable(c.NAME,!0),f.inst.setEfxEnable(l.NAME,!0);var t=f.inst.getPEFX(l.NAME);t.blurRadius=1.5,t.blendIntensity=2.5}))},e}(a))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/catmull-rom-curve.ts",["cc"],(function(t){"use strict";var i,n,s;return{setters:[function(t){i=t.cclegacy,n=t._decorator,s=t.Vec3}],execute:function(){var e;i._RF.push({},"e98eaij2CJKopPu4sv9nfEN","catmull-rom-curve",void 0);var o=n.ccclass,c=(n.property,t("CatmullRomCurve",o("CatmullRomCurve")(e=function(){function t(t){this.type="chordal",this.first=new s(0,0,0),this.last=new s(0,0,0),this.tmp=new s(0,0,0),this.px=new c,this.py=new c,this.pz=new c,this.points=[],this.tension=.5,this.points=t||[]}var i=t.prototype;return i.getPoint=function(t){var i,n,e,o,c=this.points;(o=c.length)<2&&console.log("duh, you need at least 2 points"),0==(e=(i=(o-1)*t)-(n=Math.floor(i)))&&n==o-1&&(n=o-2,e=1);var r=new s(0,0,0),a=new s(0,0,0),h=new s(0,0,0),u=new s(0,0,0);if(r=0==n?this.subVectors(c[0],c[1]).add(c[0]):c[n-1],a=c[n],h=c[n+1],u=n+2<o?c[n+2]:this.subVectors(c[o-1],c[o-2]).add(c[o-2]),"centripetal"===this.type||"chordal"===this.type){var l="chordal"===this.type?.5:.25,p=Math.pow(this.distanceToSquared(r,a),l),m=Math.pow(this.distanceToSquared(a,h),l),y=Math.pow(this.distanceToSquared(h,u),l);m<1e-4&&(m=1),p<1e-4&&(p=m),y<1e-4&&(y=m),this.px.initNonuniformCatmullRom(r.x,a.x,h.x,u.x,p,m,y),this.py.initNonuniformCatmullRom(r.y,a.y,h.y,u.y,p,m,y),this.pz.initNonuniformCatmullRom(r.z,a.z,h.z,u.z,p,m,y)}else if("catmullrom"===this.type){var f=this.tension;this.px.initCatmullRom(r.x,a.x,h.x,u.x,f),this.py.initCatmullRom(r.y,a.y,h.y,u.y,f),this.pz.initCatmullRom(r.z,a.z,h.z,u.z,f)}return new s(this.px.calc(e),this.py.calc(e),this.pz.calc(e))},i.subVectors=function(t,i){var n=new s(0,0,0);return n.x=t.x-i.x,n.y=t.y-i.y,n.z=t.z-i.z,n},i.distanceToSquared=function(t,i){var n=t.x-i.x,s=t.y-i.y,e=t.z-i.z;return n*n+s*s+e*e},t}())||e),function(){this.init=function(t,i,n,s){this.c0=t,this.c1=n,this.c2=-3*t+3*i-2*n-s,this.c3=2*t-2*i+n+s},this.initNonuniformCatmullRom=function(t,i,n,s,e,o,c){var r=(i-t)/e-(n-t)/(e+o)+(n-i)/o,a=(n-i)/o-(s-i)/(o+c)+(s-n)/c;r*=o,a*=o,this.init(i,n,r,a)},this.initCatmullRom=function(t,i,n,s,e){this.init(i,n,e*(n-t),e*(s-i))},this.calc=function(t){var i=t*t,n=i*t;return this.c0+this.c1*t+this.c2*i+this.c3*n}});i._RF.pop()}}}));

System.register("chunks:///_virtual/config.ts",["cc"],(function(e){"use strict";var s,i,t,o,r,n;return{setters:[function(e){s=e.cclegacy,i=e.game,t=e.Game,o=e.director,r=e.gfx,n=e.sys}],execute:function(){s._RF.push({},"4407eVdSvVAcb8oHCTqQxje","config",void 0);var c=e("Config",{lod:!0,debug:!1,highFps:!0,highQuality:!1,supportBendGrass:!1,bendGrass:!1});i.on(t.EVENT_ENGINE_INITED,(function(){o.root&&o.root.device.hasFeature(r.Feature.TEXTURE_HALF_FLOAT)&&(c.supportBendGrass=!0,n.isMobile||(c.bendGrass=!0)),n.isMobile||(c.highFps=!0,c.highQuality=!0)})),s._RF.pop()}}}));

System.register("chunks:///_virtual/curve.ts",["cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy,n=t._decorator}],execute:function(){var r;e._RF.push({},"77e72qIPJNMp5ZIKUhsTgmN","curve",void 0);var u=n.ccclass;n.property,t("Curve",u("Curve")(r=function(){function t(){}return t.tangentQuadraticBezier=function(t,e,n,r){return 2*(1-t)*(n-e)+2*t*(r-n)},t.tangentCubicBezier=function(t,e,n,r,u){return-3*e*(1-t)*(1-t)+3*n*(1-t)*(1-t)-6*t*n*(1-t)+6*t*r*(1-t)-3*t*t*r+3*t*t*u},t.tangentSpline=function(t,e,n,r,u){return 6*t*t-6*t+(3*t*t-4*t+1)+(-6*t*t+6*t)+(3*t*t-2*t)},t.interpolate=function(t,e,n,r,u){var c=.5*(n-t),i=.5*(r-e),o=u*u;return(2*e-2*n+c+i)*(u*o)+(-3*e+3*n-2*c-i)*o+c*u+e},t}())||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/distribute-grid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./lod.ts"],(function(t){"use strict";var e,i,r,n,o,a,s,l,p,u,c,h,d,f,m,b,y,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,s=t._decorator,l=t.Prefab,p=t.Material,u=t.Node,c=t.Mesh,h=t.instantiate,d=t.MeshRenderer,f=t.CCObject,m=t.ModelComponent,b=t.Component},function(t){y=t.LodConfig,g=t.Lod}],execute:function(){var _,w,v,M,C,z,D,O,L,P,j,F,T,k,I,R,x,H,A,E,G;a._RF.push({},"b62e7mXo3FLrbgRC761sLwW","distribute-grid",void 0);var S=s.ccclass,B=s.property,N=s.executeInEditMode,W=s.type;function X(t,e){var i=t.getComponent(d);i&&i.mesh&&e.merge(i.mesh,t.worldMatrix);for(var r=0;r<t.children.length;r++)X(t.children[r],e)}var q=t("LodTemplate",(_=S("LodTemplate"),w=W(l),_((C=e((M=function(){function t(){r(this,"template",C,this),r(this,"distance",z,this),this._mesh=null}return t.prototype.getMesh=function(){if(!this.template)return null;this._mesh||(this._mesh=new c,X(h(this.template),this._mesh));return this._mesh},t}()).prototype,"template",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(M.prototype,"distance",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=M))||v));t("DistributeGrid",(D=S("DistributeGrid"),O=W(p),L=W(p),P=W(l),j=W(l),F=W(q),T=W(u),D(k=N((R=e((I=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"_material",R,n(e)),r(e,"_space",x,n(e)),r(e,"_template",H,n(e)),r(e,"_count",A,n(e)),r(e,"lods",E,n(e)),r(e,"lodTarget",G,n(e)),e}i(e,t);var a=e.prototype;return a.onEnable=function(){this.distribute(),this.updateMaterial()},a.distribute=function(){if(this.template){var t=this.lods.map((function(t){var e=new y;return e.mesh=t.getMesh(),e.distance=t.distance,e})),e=0|Math.pow(this.count,.5);this.node.removeAllChildren();for(var i=0;i<this.count;i++){var r=new u,n=(r.addComponent(d),r.addComponent(g));n.lods=t,n.target=this.lodTarget,r.setPosition(i%e*this.space,0,Math.floor(i/e)*this.space),r._objFlags|=f.Flags.DontSave|f.Flags.HideInHierarchy,r.parent=this.node}}},a.updateMaterial=function(){if(this.material)for(var t=this.node.getComponentsInChildren(m),e=0;e<t.length;e++){t[e].setMaterial(this.material,0)}},o(e,[{key:"material",get:function(){return this._material},set:function(t){this._material=t,this.updateMaterial()}},{key:"space",get:function(){return this._space},set:function(t){this._space=t,this.distribute()}},{key:"template",get:function(){return this._template},set:function(t){this._template=t,this.distribute()}},{key:"count",get:function(){return this._count},set:function(t){this._count=t,this.distribute()}}]),e}(b)).prototype,"_material",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(I.prototype,"material",[L],Object.getOwnPropertyDescriptor(I.prototype,"material"),I.prototype),x=e(I.prototype,"_space",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),e(I.prototype,"space",[B],Object.getOwnPropertyDescriptor(I.prototype,"space"),I.prototype),H=e(I.prototype,"_template",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(I.prototype,"template",[j],Object.getOwnPropertyDescriptor(I.prototype,"template"),I.prototype),A=e(I.prototype,"_count",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(I.prototype,"count",[B],Object.getOwnPropertyDescriptor(I.prototype,"count"),I.prototype),E=e(I.prototype,"lods",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=e(I.prototype,"lodTarget",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=I))||k)||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/ear-cut.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"302e3dMYvFMo5futJ1zwrYg","ear-cut",void 0);var n=function(e,t,n){this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1,this.i=e,this.x=t,this.y=n};e("Earcut",function(){function e(){}return e.polygonEarcut=function(e,t,n){n=n||3;var i=t?t.length:0,r=i?t[0]*n:e.length,s=this.linkedList(e,0,r,n,!0),x=[];if(!s)return x;var l=0,u=0,o=0,a=0,h=0,v=0,f=0;if(i&&(s=this.eliminateHoles(e,t,s,n)),e.length>80*n){l=o=e[0],u=a=e[1];for(var y=n;y<r;y+=n)(h=e[y])<l&&(l=h),(v=e[y+1])<u&&(u=v),h>o&&(o=h),v>a&&(a=v);f=Math.max(o-l,a-u)}return this.earcutLinked(s,x,n,l,u,f),x},e.linkedList=function(e,t,n,i,r){var s=0,x=null;if(r===this.signedArea(e,t,n,i)>0)for(s=t;s<n;s+=i)x=this.insertNode(s,e[s],e[s+1],x);else for(s=n-i;s>=t;s-=i)x=this.insertNode(s,e[s],e[s+1],x);return x&&this.equals(x,x.next)&&(this.removeNode(x),x=x.next),x},e.eliminateHoles=function(e,t,n,i){var r,s=[],x=0,l=0,u=0,o=null;for(x=0,r=t.length;x<r;x++)l=t[x]*i,u=x<r-1?t[x+1]*i:e.length,(o=this.linkedList(e,l,u,i,!1))&&(o===o.next&&(o.steiner=!0),s.push(this.getLeftmost(o)));if(s.sort(this.compareX),!n)return n;for(x=0;x<s.length;x++)this.eliminateHole(s[x],n),n=this.filterPoints(n,n.next);return n},e.eliminateHole=function(e,t){if(t=this.findHoleBridge(e,t)){var n=this.splitPolygon(t,e);this.filterPoints(n,n.next)}},e.findHoleBridge=function(e,t){var n=t,i=e.x,r=e.y,s=-1/0,x=null;do{if(r<=n.y&&r>=n.next.y){var l=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(l<=i&&l>s){if(s=l,l===i){if(r===n.y)return n;if(r===n.next.y)return n.next}x=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!x)return null;if(i===s)return x.prev;var u,o=x,a=x.x,h=x.y,v=1/0;for(n=x.next;n!==o;)i>=n.x&&n.x>=a&&this.pointInTriangle(r<h?i:s,r,a,h,r<h?s:i,r,n.x,n.y)&&((u=Math.abs(r-n.y)/(i-n.x))<v||u===v&&n.x>x.x)&&this.locallyInside(n,e)&&(x=n,v=u),n=n.next;return x},e.compareX=function(e,t){return e.x-t.x},e.getLeftmost=function(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n},e.signedArea=function(e,t,n,i){for(var r=0,s=t,x=n-i;s<n;s+=i)r+=(e[x]-e[s])*(e[s+1]+e[x+1]),x=s;return r},e.insertNode=function(e,t,i,r){var s=new n(e,t,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s},e.equals=function(e,t){return e.x===t.x&&e.y===t.y},e.removeNode=function(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)},e.earcutLinked=function(e,t,n,i,r,s,x){if(void 0===x&&(x=0),e){!x&&s&&this.indexCurve(e,i,r,s);for(var l=e,u=null,o=null;e.prev!==e.next;)if(u=e.prev,o=e.next,s?this.isEarHashed(e,i,r,s):this.isEar(e))t.push(u.i/n),t.push(e.i/n),t.push(o.i/n),this.removeNode(e),e=o.next,l=o.next;else if((e=o)===l){x?1===x?(e=this.cureLocalIntersections(e,t,n),this.earcutLinked(e,t,n,i,r,s,2)):2===x&&this.splitEarcut(e,t,n,i,r,s):this.earcutLinked(this.filterPoints(e),t,n,i,r,s,1);break}}},e.indexCurve=function(e,t,n,i){var r=e;do{null===r.z&&(r.z=this.zOrder(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,this.sortLinked(r)},e.zOrder=function(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)/r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/r)|t<<8))|t<<4))|t<<2))|t<<1))<<1},e.sortLinked=function(e){var t=0,n=null,i=null,r=null,s=null,x=0,l=0,u=0,o=1;do{for(n=e,e=null,s=null,x=0;n;){for(x++,i=n,l=0,t=0;t<o&&(l++,i=i.nextZ);t++);for(u=o;l>0||u>0&&i;)0===l?(r=i,i=i.nextZ,u--):0!==u&&i?n.z<=i.z?(r=n,n=n.nextZ,l--):(r=i,i=i.nextZ,u--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,o*=2}while(x>1);return e},e.isEarHashed=function(e,t,n,i){var r=e.prev,s=e,x=e.next;if(this.area(r,s,x)>=0)return!1;for(var l=r.x<s.x?r.x<x.x?r.x:x.x:s.x<x.x?s.x:x.x,u=r.y<s.y?r.y<x.y?r.y:x.y:s.y<x.y?s.y:x.y,o=r.x>s.x?r.x>x.x?r.x:x.x:s.x>x.x?s.x:x.x,a=r.y>s.y?r.y>x.y?r.y:x.y:s.y>x.y?s.y:x.y,h=this.zOrder(l,u,t,n,i),v=this.zOrder(o,a,t,n,i),f=e.nextZ;f&&f.z<=v;){if(f!==e.prev&&f!==e.next&&this.pointInTriangle(r.x,r.y,s.x,s.y,x.x,x.y,f.x,f.y)&&this.area(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&this.pointInTriangle(r.x,r.y,s.x,s.y,x.x,x.y,f.x,f.y)&&this.area(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0},e.isEar=function(e){var t=e.prev,n=e,i=e.next;if(this.area(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(this.pointInTriangle(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&this.area(r.prev,r,r.next)>=0)return!1;r=r.next}return!0},e.area=function(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)},e.pointInTriangle=function(e,t,n,i,r,s,x,l){return(r-x)*(t-l)-(e-x)*(s-l)>=0&&(e-x)*(i-l)-(n-x)*(t-l)>=0&&(n-x)*(s-l)-(r-x)*(i-l)>=0},e.filterPoints=function(e,t){if(void 0===t&&(t=null),!e)return e;t||(t=e);var n=e,i=!1;do{if(i=!1,n.steiner||!this.equals(n,n.next)&&0!==this.area(n.prev,n,n.next))n=n.next;else{if(this.removeNode(n),(n=t=n.prev)===n.next)return null;i=!0}}while(i||n!==t);return t},e.cureLocalIntersections=function(e,t,n){var i=e;do{var r=i.prev,s=i.next.next;!this.equals(r,s)&&this.intersects(r,i,i.next,s)&&this.locallyInside(r,s)&&this.locallyInside(s,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(s.i/n),this.removeNode(i),this.removeNode(i.next),i=e=s),i=i.next}while(i!==e);return i},e.splitEarcut=function(e,t,n,i,r,s){var x=e;do{for(var l=x.next.next;l!==x.prev;){if(x.i!==l.i&&this.isValidDiagonal(x,l)){var u=this.splitPolygon(x,l);return x=this.filterPoints(x,x.next),u=this.filterPoints(u,u.next),this.earcutLinked(x,t,n,i,r,s),void this.earcutLinked(u,t,n,i,r,s)}l=l.next}x=x.next}while(x!==e)},e.isValidDiagonal=function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!this.intersectsPolygon(e,t)&&this.locallyInside(e,t)&&this.locallyInside(t,e)&&this.middleInside(e,t)},e.splitPolygon=function(e,t){var i=new n(e.i,e.x,e.y),r=new n(t.i,t.x,t.y),s=e.next,x=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,r.next=i,i.prev=r,x.next=r,r.prev=x,r},e.intersects=function(e,t,n,i){return!!(this.equals(e,t)&&this.equals(n,i)||this.equals(e,i)&&this.equals(n,t))||this.area(e,t,n)>0!=this.area(e,t,i)>0&&this.area(n,i,e)>0!=this.area(n,i,t)>0},e.locallyInside=function(e,t){return this.area(e.prev,e,e.next)<0?this.area(e,t,e.next)>=0&&this.area(e,e.prev,t)>=0:this.area(e,t,e.prev)<0||this.area(e,e.next,t)<0},e.intersectsPolygon=function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&this.intersects(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1},e.middleInside=function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/EnvMapUsage.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,a,r,i,n,o,s,p,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.TextureCube,p=e.MeshRenderer,c=e.Texture2D,l=e.Component}],execute:function(){var g,h,u,M,v;n._RF.push({},"dc4f4K7cdVBOKjxXDRcUvXM","EnvMapUsage",void 0);var m=o.ccclass,y=o.property;e("EnvMapUsage",(g=m("EnvMapUsage"),h=y({type:s}),g((v=t((M=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(t,"envMap",v,i(t)),t}return a(t,e),t.prototype.start=function(){var e=this.node.getComponent(p),t=new c;t.image=this.envMap.image.back,e.sharedMaterial.setProperty("back",t),t.image=this.envMap.image.front,e.sharedMaterial.setProperty("front",t),t.image=this.envMap.image.left,e.sharedMaterial.setProperty("left",t),t.image=this.envMap.image.right,e.sharedMaterial.setProperty("right",t),t.image=this.envMap.image.top,e.sharedMaterial.setProperty("top",t),t.image=this.envMap.image.bottom,e.sharedMaterial.setProperty("bottom",t)},t}(l)).prototype,"envMap",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=M))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/fullscreen.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,c,r,s,u;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,c=e._decorator,r=e.Node,s=e.sys,u=e.Component}],execute:function(){var o;t._RF.push({},"6ac746xf9JIFYsJZes7ZclD","fullscreen",void 0);var l=c.ccclass;c.property,e("Fullscreen",l("Fullscreen")(o=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var c=t.prototype;return c.start=function(){this.node.on(r.EventType.TOUCH_END,this.checkFullScreen,this)},c.checkFullScreen=function(e){s.isMobile&&s.isBrowser&&document&&document.documentElement&&document.documentElement.requestFullscreen&&(document.fullscreenElement||document.documentElement.requestFullscreen())},t}(u))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/gerstner.ts",["cc"],(function(e){"use strict";var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.Vec2,r=e.Vec3}],execute:function(){e({gerstner:d,gerstnerWaves:function(e,t,n,s,c,a,i,o){var v=t.x,w=t.y,g=t.z;return a=a||x,i=i||y,o=o||f,(c=c||u).set(0,0,0),i.set(1,0,0),o.set(0,0,1),d(e,v,w,g,n.x,s,c,i,o),d(e,v,w,g,n.y,s,c,i,o),d(e,v,w,g,n.z,s,c,i,o),d(e,v,w,g,n.w,s,c,i,o),r.cross(a,o,i),a.normalize(),c}}),t._RF.push({},"74512lfC3BH9bSphFaOO6E7","gerstner",void 0);var s=Math.sin,c=Math.cos,a=Math.PI,i=new n,o=new n,u=new r,x=new r,y=new r,f=new r;function d(e,t,n,r,u,x,y,f,d){u=2*u-1,i.set(c(a*u),s(a*u));var v=i.normalize(),w=t,g=2*a/n,h=g*(v.dot(o.set(e.x,e.z))-r*x),l=w/g,z=c(h),p=s(h);f.add3f(-v.x*v.x*w*p,v.x*w*z,-v.x*v.y*w*p),d.add3f(-v.x*v.y*w*p,v.y*w*z,-v.y*v.y*w*p),y.add3f(v.x*l*z,l*p,v.y*l*z)}t._RF.pop()}}}));

System.register("chunks:///_virtual/GL_PlayVideo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){"use strict";var t,i,o,n,l,r,s,a,d,m,h,u,_,p,c,v,y,f,g,w,V,b,T,x,C,D,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,l=e.createClass},function(e){r=e.cclegacy,s=e.gfx,a=e._decorator,d=e.VideoClip,m=e.CCInteger,h=e.Enum,u=e.CCFloat,_=e.Vec3,p=e.Quat,c=e.Sprite,v=e.MeshRenderer,y=e.game,f=e.log,g=e.Texture2D,w=e.macro,V=e.ImageAsset,b=e.SpriteFrame,T=e.UITransform,x=e.math,C=e.Component,D=e.size},function(e){N=e.EDITOR}],execute:function(){var P,E,L,O,R,B,M,I,S,A,z,k,W,F,G,U,q,j,H,X,J,Q,K,Y,Z,$,ee,te,ie,oe,ne,le,re,se,ae,de,me,he,ue,_e,pe,ce;e({open_self_video_type:void 0,simp_set_attr_type:void 0}),r._RF.push({},"ea824WSRWRD3LJUSBgXeN5B","GL_PlayVideo",void 0);var ve,ye,fe=s.Device,ge=a.ccclass,we=a.property,Ve=(a.requireComponent,a.executeInEditMode),be=(a.executionOrder,a.playOnFocus),Te=a.disallowMultiple,xe=a.menu,Ce=a.help;!function(e){e[e["LOCAL_本地_video"]=0]="LOCAL_本地_video",e[e["REMOTE_远程_video"]=1]="REMOTE_远程_video"}(ve||(ve=e("open_self_video_type",{}))),function(e){e["简单属性设置_video"]="true",e["更多属性设置_video"]="false"}(ye||(ye=e("simp_set_attr_type",{})));var De,Ne,Pe=ye.更多属性设置_video,Ee=ve.LOCAL_本地_video,Le=["http://download.cocos.org/CocosTest/test-case/movie.mp4","https://www.w3school.com.cn/i/movie.mp4","http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400","http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4","http://vjs.zencdn.net/v/oceans.mp4","https://media.w3.org/2010/05/sintel/trailer.mp4","http://vfx.mtime.cn/Video/2019/03/21/mp4/190321153853126488.mp4","http://vfx.mtime.cn/Video/2019/03/19/mp4/190319222227698228.mp4","http://vfx.mtime.cn/Video/2019/03/19/mp4/190319212559089721.mp4","http://vfx.mtime.cn/Video/2019/03/18/mp4/190318231014076505.mp4","http://vfx.mtime.cn/Video/2019/03/18/mp4/190318214226685784.mp4","http://vfx.mtime.cn/Video/2019/03/19/mp4/190319104618910544.mp4","http://vfx.mtime.cn/Video/2019/03/19/mp4/190319125415785691.mp4","http://vfx.mtime.cn/Video/2019/03/17/mp4/190317150237409904.mp4","http://vfx.mtime.cn/Video/2019/03/14/mp4/190314223540373995.mp4","http://vfx.mtime.cn/Video/2019/03/14/mp4/190314102306987969.mp4","http://vfx.mtime.cn/Video/2019/03/13/mp4/190313094901111138.mp4","http://vfx.mtime.cn/Video/2019/03/12/mp4/190312143927981075.mp4","http://vfx.mtime.cn/Video/2019/03/12/mp4/190312083533415853.mp4","http://vfx.mtime.cn/Video/2019/03/09/mp4/190309153658147087.mp4"]||["https://www.w3school.com.cn/i/movie.mp4","http://mirror.aarnet.edu.au/pub/TED-talks/911Mothers_2010W-480p.mp4"],Oe=Le[Math.floor(Math.random()*Le.length)];De={clogMsg:{objectName:"ccVideo_prop_i18n",showVideoDomView:"请先开启 [预览视频] 选项",videoCurrentTimeNum:["当前进度","已超过视频总时长"],createNewVideoElementIf_Catch:"执行出错 =>",createNewVideoTextureIf:"设备不支持渲染 Video 视频!",lateUpdate_Catch:"加载出错::=>",not_editorLog_tip:" 请在编辑器环境下执行 !",plugin_main:[" 已导入 "," 节点"],hierarchy_menu:[" 已创建 "," 节点"]},comp:{using_name:["ccVideo_prop_i18n.comp.gl_video_ts.","ccVideo_prop_i18nComp"],gl_video_ts:{_local_video_source:{name:"本地视频资源_0",tip:"源·本地的视频资源·默认不显示的"},reFlashSpeed:{name:"刷新频率",tip:"设置视频画面的的刷新频率,值越小,视频播放越流畅,\n默认 17,最大 1000*10,步增最小1"},select_rich_type_value:{name:"选择 Video 类型",tip:"[请注意] 每次更改选项时, 会自动随机更改远程的 URL , \n选择 Video 的类型, 默认加载本地视频,\n不建议频繁更改此地址! \n加载远程的非同域名下的视频, 需自行做好跨域处理!"},setDefaultWh:{name:"宽高设置",tip:"设置视频宽高,\n此处改为视频的真实宽高,不建议乱改!\n默认视频宽高设置 480*272 , \n宽高设置仅 onLoad 初始一次! 此处不允许频繁修改!!\n最好根据实际视频的帧的宽高来写 !!!"},local_video_source:{name:"本地视频资源",tip:"请绑定一个本地的视频资源, 注意视频的格式,\n不建议频繁切换本地资源, 切换后纹理可能对不上 !!!"},remote_video_url:{name:"远程视频URL",tip:"填写远程视频的链接, 请注意不要跨域, \n 注意：需要自行解决跨域问题"},appendVideoToPage:{name:"展示 Video 标签",tip:"在 浏览器内展示 Video 标签, \n用于防止 Cocos 编辑器加载视频流=>\n无 Video 标签时出现的卡崩溃的问题, 已自动开启!!"},select_video_attr:{name:"简单属性",tip:"默认采用简单的属性设置, 简化面板内容,\n取消选中后, 可自定义更多的视频的属性内容!"},previewVideo:{name:"[预览视频]",tip:"在 Cocos 和浏览器内预览视频内容\n默认关闭预览+静音(提高性能)\n此项关闭时, 视频默认不启用不播放!"},_showVideoDomView:{name:"Video DOM 内容",tip:"Video DOM 内容"},showVideoDomView:{name:"查看 Video DOM 内容",tip:"必须先开启预览模式才能查看, \n在 Cocos 编辑器或者浏览器内展示 Video DOM 的内容, \n用于调试和查看视频内容, 已自动关闭!!"},openLook3dVideoNodeBool:{name:"节点自旋",tip:"开启后, 节点自动持续旋转, \n用来查看视频渲染在 3D 物体上的各个角度的效果,\n默认开启调试, 不调试时, 建议关闭!"},autoPlayVideo:{name:"自动播放视频",tip:"视频加载后自动播放视频, 建议开启"},loopVideoPlay:{name:"循环播放",tip:"只有在开启 [预览视频] 选项时才能更改此项,\n 循环播放视频,默认开启+开启声音,但是开启过多会触发Bug,\n循环和音量不建议在编辑器内预览, 容易导致编辑器卡顿"},pausePlayVideo:{name:"暂停播放视频",tip:"只有在开启 [预览视频] 选项时才能更改此项,\n 自由调试是否 播放/暂停 当前的视频"},mutedOpenBool:{name:"是否静音",tip:"是否静音? 开启后视频全程无声音, 编辑器内建议开启!\n默认开启声音"},videoPlaybackRateNum:{name:"视频播放速度",tip:"设置视频的播放速度(0~10),倍速播放,默认 1 倍速播放"},videoVolumeNum:{name:"视频音量",tip:"设置音量,\n音量范围是0=>1\n(循环和音量不建议在编辑器内预览,得重启编辑器才行)"},videoCurrentTimeNum:{name:"视频进度",tip:"暂时只支持绑定本地视频元素时才能滑动此属性, \n设置当前视频播放的进度,\n设置视频中的当前播放位置（以秒计）\n请注意不要设置超过当前视频的总时长!"},temp_item_property:{name:"",tip:""}}}},Ne={_local_video_source:{name:"本地视频资源_0",tip:"源·本地的视频资源·默认不显示的"},reFlashSpeed:{name:"刷新频率",tip:"设置视频画面的的刷新频率,值越小,视频播放越流畅,\n默认 17,最大 1000*10,步增最小1"},select_rich_type_value:{name:"选择 Video 类型",tip:"[请注意] 每次更改选项时, 会自动随机更改远程的 URL , \n选择 Video 的类型, 默认加载本地视频,\n不建议频繁更改此地址! \n加载远程的非同域名下的视频, 需自行做好跨域处理!"},setDefaultWh:{name:"宽高设置",tip:"设置视频宽高,\n此处改为视频的真实宽高,不建议乱改!\n默认视频宽高设置 480*272 , \n宽高设置仅 onLoad 初始一次! 此处不允许频繁修改!!\n最好根据实际视频的帧的宽高来写 !!!"},local_video_source:{name:"本地视频资源",tip:"请绑定一个本地的视频资源, 注意视频的格式,\n不建议频繁切换本地资源, 切换后纹理可能对不上 !!!"},remote_video_url:{name:"远程视频URL",tip:"填写远程视频的链接, 请注意不要跨域, \n 注意：需要自行解决跨域问题"},appendVideoToPage:{name:"展示 Video 标签",tip:"在 浏览器内展示 Video 标签, \n用于防止 Cocos 编辑器加载视频流=>\n无 Video 标签时出现的卡崩溃的问题, 已自动开启!!"},select_video_attr:{name:"简单属性",tip:"默认采用简单的属性设置, 简化面板内容,\n取消选中后, 可自定义更多的视频的属性内容!"},previewVideo:{name:"[预览视频]",tip:"在 Cocos 和浏览器内预览视频内容\n默认关闭预览+静音(提高性能)\n此项关闭时, 视频默认不启用不播放!"},_showVideoDomView:{name:"Video DOM 内容",tip:"Video DOM 内容"},showVideoDomView:{name:"查看 Video DOM 内容",tip:"必须先开启预览模式才能查看, \n在 Cocos 编辑器或者浏览器内展示 Video DOM 的内容, \n用于调试和查看视频内容, 已自动关闭!!"},openLook3dVideoNodeBool:{name:"节点自旋",tip:"开启后, 节点自动持续旋转, \n用来查看视频渲染在 3D 物体上的各个角度的效果,\n默认开启调试, 不调试时, 建议关闭!"},autoPlayVideo:{name:"自动播放视频",tip:"视频加载后自动播放视频, 建议开启"},loopVideoPlay:{name:"循环播放",tip:"只有在开启 [预览视频] 选项时才能更改此项,\n 循环播放视频,默认开启+开启声音,但是开启过多会触发Bug,\n循环和音量不建议在编辑器内预览, 容易导致编辑器卡顿"},pausePlayVideo:{name:"暂停播放视频",tip:"只有在开启 [预览视频] 选项时才能更改此项,\n 自由调试是否 播放/暂停 当前的视频"},mutedOpenBool:{name:"是否静音",tip:"是否静音? 开启后视频全程无声音, 编辑器内建议开启!\n默认开启声音"},videoPlaybackRateNum:{name:"视频播放速度",tip:"设置视频的播放速度(0~10),倍速播放,默认 1 倍速播放"},videoVolumeNum:{name:"视频音量",tip:"设置音量,\n音量范围是0=>1\n(循环和音量不建议在编辑器内预览,得重启编辑器才行)"},videoCurrentTimeNum:{name:"视频进度",tip:"暂时只支持绑定本地视频元素时才能滑动此属性, \n设置当前视频播放的进度,\n设置视频中的当前播放位置（以秒计）\n请注意不要设置超过当前视频的总时长!"},temp_item_property:{name:"",tip:""}};e("GL_PlayVideo",(P=ge("GL_PlayVideo"),E=xe("自定义视频播放器"),L=Ce("https://docs.cocos.com/creator/manual/zh/ui-system/components/editor/videoplayer.html"),O=we({displayName:Ne._local_video_source.name,tooltip:Ne._local_video_source.tip,type:d,visible:function(){return Ee==ve.LOCAL_本地_video&&!1}}),R=we({type:m,range:[0,1e3,1],displayName:Ne.reFlashSpeed.name,tooltip:Ne.reFlashSpeed.tip,slide:!0}),B=we({displayName:Ne.select_rich_type_value.name,tooltip:Ne.select_rich_type_value.tip,type:h(ve),displayOrder:-124,visible:function(){return!0}}),M=we({visible:!1}),I=we({displayName:Ne.setDefaultWh.name,tooltip:Ne.setDefaultWh.tip,readonly:!1,visible:function(){return Pe==ye.更多属性设置_video}}),S=we({displayName:Ne.local_video_source.name,tooltip:Ne.local_video_source.tip,type:d,visible:function(){return Ee==ve.LOCAL_本地_video}}),A=we({displayName:Ne.remote_video_url.name,tooltip:Ne.remote_video_url.tip,visible:function(){return Ee==ve.REMOTE_远程_video}}),z=we({displayName:Ne.appendVideoToPage.name,tooltip:Ne.appendVideoToPage.tip,visible:!1,readonly:!0}),k=we({displayName:Ne.select_video_attr.name,tooltip:Ne.select_video_attr.tip}),W=we({displayName:Ne.previewVideo.name,tooltip:Ne.previewVideo.tip,visible:!0}),F=we({displayName:Ne._showVideoDomView.name,tooltip:Ne._showVideoDomView.tip,visible:!1}),G=we({displayName:Ne.showVideoDomView.name,tooltip:Ne.showVideoDomView.tip,visible:!0,readonly:!1}),U=we({displayName:Ne.openLook3dVideoNodeBool.name,tooltip:Ne.openLook3dVideoNodeBool.tip,visible:!0}),q=we({displayName:Ne.autoPlayVideo.name,tooltip:Ne.autoPlayVideo.tip,visible:function(){return Pe==ye.更多属性设置_video}}),j=we({displayName:Ne.loopVideoPlay.name,tooltip:Ne.loopVideoPlay.tip,visible:function(){return Pe==ye.更多属性设置_video}}),H=we({displayName:Ne.pausePlayVideo.name,tooltip:Ne.pausePlayVideo.tip,visible:function(){return Pe==ye.更多属性设置_video}}),X=we({displayName:Ne.mutedOpenBool.name,tooltip:Ne.mutedOpenBool.tip,visible:function(){return Pe==ye.更多属性设置_video}}),J=we({displayName:Ne.videoPlaybackRateNum.name,tooltip:Ne.videoPlaybackRateNum.tip,type:u,range:[0,10,.1],slide:!0,visible:function(){return Pe==ye.更多属性设置_video}}),Q=we({displayName:Ne.videoVolumeNum.name,tooltip:Ne.videoVolumeNum.tip,type:u,range:[0,1,.1],slide:!0,visible:function(){return Pe==ye.更多属性设置_video}}),K=we({displayName:Ne.videoCurrentTimeNum.name,tooltip:Ne.videoCurrentTimeNum.tip,type:u,range:[0,120,.1],slide:!0,visible:function(){return Pe==ye.更多属性设置_video}}),P(Y=E(Y=L(Y=be(Y=Te(Y=Ve(($=t((Z=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return(t=e.call.apply(e,[this].concat(l))||this).last_timeNum=0,t.loadIsErrorBool=!1,t.getVideoIsnPlay=null,t.get_mat=null,t.MakeVideoElement=null,t.setVideoTexture=null,t.setVideoTextureRemote=null,t.setVideoTextureReady=!1,t.get_gfx_device=null,t.set_euler=new _,t.set_quat=new p,t.set_speed=10,t.video_html_element=null,t.draw_sprite_canvas=null,t.new_source_html=null,t.video_element_idNum="video_id_"+Math.floor((new Date).getTime()),t.mainTextureShow=null,t.updateClearTextureBool=!0,o(t,"_select_video_type",$,n(t)),o(t,"_simple_set_attribute",ee,n(t)),o(t,"_previewVideo",te,n(t)),o(t,"_videoCurrentTimeNum",ie,n(t)),o(t,"_remote_video_url",oe,n(t)),o(t,"_local_video_source",ne,n(t)),o(t,"reFlashSpeed",le,n(t)),o(t,"_setDefaultWh",re,n(t)),o(t,"appendVideoToPage",se,n(t)),o(t,"_showVideoDomView",ae,n(t)),o(t,"openLook3dVideoNodeBool",de,n(t)),o(t,"autoPlayVideo",me,n(t)),o(t,"loopVideoPlay",he,n(t)),o(t,"pausePlayVideo",ue,n(t)),o(t,"mutedOpenBool",_e,n(t)),o(t,"videoPlaybackRateNum",pe,n(t)),o(t,"videoVolumeNum",ce,n(t)),t}i(t,e);var r=t.prototype;return r.onLoad=function(){this.start_add_video_element();var e=this.node.getComponent(c);this.node.layer=e?1<<25:1<<23,this.showVideoDomView=this._showVideoDomView},r.start=function(){this.select_node_type_uuid();var e=this.node.getComponent(v);this.node.layer=e?1<<23:1<<25,this.showVideoDomView=this._showVideoDomView},r.onDestroy=function(){this.pausePlayVideo=!0,this.loopVideoPlay=!1,this.previewVideo=!1,this.removeVideoElement(),this.updateClearTextureBool&&(this.updateClearTextureBool=!1)},r.random_return_chance=function(e,t){if(!e||0==e.length||!t||0==t.length)return null;for(var i=t.reduce((function(e,t){return e+t}),0),o=Math.random()*i,n=0,l=0,r=t.length;l<r;++l){if(o<(n=t[l]||0))return e[l];o-=n}return null},r.destoryThisNode=function(){this.pausePlayVideo=!0,this.previewVideo=!1,this.removeVideoElement(),this.updateClearTextureBool&&(this.updateClearTextureBool=!1)},r.start_add_video_element=function(){if(this.webPlayVideo()&&(y._gfxDevice||s.Device))if(this.get_gfx_device=y._gfxDevice||s.deviceManager.gfxDevice||s.Device,this.createNewVideoTextureIf(this.get_gfx_device),this.remote_video_url.length>0&&this._select_video_type==ve.REMOTE_远程_video)this.createNewVideoElementIf(this.remote_video_url);else{var e,t=null==(e=this.local_video_source)?void 0:e._uuid,i=this.local_video_source.nativeUrl;t&&this.createNewVideoElementIf(i)}},r.webPlayVideo=function(){return!!document||(f("解析失败! 仅支持 HTML5 环境播放视频"),!1)},r.createNewVideoElementIf=function(e){if(0!=e.length){if(!this.previewVideo)return null;this.video_html_element&&this.removeVideoElement(),this.video_html_element=document.createElement("video"),this.new_source_html=document.createElement("source"),this.new_source_html.type="video/mp4",this.video_html_element.appendChild(this.new_source_html),this.draw_sprite_canvas=document.createElement("canvas"),this.video_html_element.appendChild(this.draw_sprite_canvas),this.draw_sprite_canvas.style.visibility="hidden",this.draw_sprite_canvas.style.position="absolute",this.draw_sprite_canvas.style.bottom="0px",this.draw_sprite_canvas.style.left="0px";var t=!1,i=!1;this.video_element_idNum="video_id_"+Math.floor((new Date).getTime()),this.video_html_element.id=this.video_element_idNum,this.video_html_element.autoplay=this.autoPlayVideo,this.video_html_element.muted=this.mutedOpenBool,this.video_html_element.loop=this.loopVideoPlay,this.video_html_element.volume=this.videoVolumeNum,this.video_html_element.currentTime=this.videoCurrentTimeNum,this.video_html_element.style.visibility="hidden",this.video_html_element.style.position="absolute",this.video_html_element.style.bottom="0px",this.video_html_element.style.left="0px",this.video_html_element.setAttribute("webkit-playsinline",""),this.video_html_element.setAttribute("x5-playsinline",""),this.video_html_element.setAttribute("playsinline",""),this.video_html_element.setAttribute("crossOrigin","anonymous"),this.new_source_html.src=e;try{var o,n=function(){t&&i&&(l.setVideoTextureReady=!0)},l=this,r=this;if(this.video_html_element.addEventListener("canplay",(function(){r.setDefaultWh&&(r.setDefaultWh.width=this.videoWidth,r.setDefaultWh.height=this.videoHeight)})),this.video_html_element.addEventListener("playing",(function(){t=!0,n()}),!0),this.video_html_element.addEventListener("timeupdate",(function(){i=!0,n()}),!0),this.appendVideoToPage)if(this.mutedOpenBool||0==this.videoVolumeNum?(this.video_html_element.style.width="0",this.video_html_element.style.height="0"):(this.video_html_element.style.width="100%",this.video_html_element.style.height="100%"),document.querySelector("#Cocos3dGameContainer"))null==(o=document.querySelector("#Cocos3dGameContainer"))||o.appendChild(this.video_html_element);else document.body.appendChild(this.video_html_element);if(this.setVideoTextureReady)if(this.pausePlayVideo)this.getVideoIsnPlay&&this.video_html_element.pause();else try{this.getVideoIsnPlay=this.video_html_element.play()}catch(e){this.clog("加载视频报错=>",e)}return this.video_html_element.playbackRate=this.videoPlaybackRateNum,this.video_html_element}catch(e){return this.clog(De.clogMsg.createNewVideoElementIf_Catch+e),null}}},r.onCanPlay=function(e){e.target},r.removeVideoElement=function(){var e=this.video_html_element,t=document.getElementById(this.video_element_idNum),i=null,o=null;return null!=e&&e.parentElement||null!=t&&t.parentElement?o=(i=(null==e?void 0:e.parentElement)||(null==t?void 0:t.parentElement)).removeChild(e)||i.removeChild(t):this.video_html_element=null,this.video_html_element=null,this.new_source_html=null,this.draw_sprite_canvas=null,this.clearVideoTexture(),o===e},r.clearVideoTexture=function(){if(this.setVideoTexture){this.setVideoTexture=null,this.setVideoTextureRemote=null;var e,t=this.node.getComponent(v),i=this.node.getComponent(c);if(t)this.mainTextureShow={type:g,default:null},null==(e=this.get_mat)||e.setProperty("mainTexture",this.mainTextureShow,0);i&&(this.draw_sprite_canvas=null)}},r.gl_getContext=function(e){var t=null;try{var i={alpha:w.ENABLE_TRANSPARENT_CANVAS,antialias:N||w.ENABLE_WEBGL_ANTIALIAS,depth:!0,stencil:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,powerPreference:"default",failIfMajorPerformanceCaveat:!1};t=e.getContext("webgl2",i)||e.getContext("webgl",i)}catch(e){return null}return t},r.createNewVideoTextureIf=function(e){if(e){if(this.setVideoTexture)return this.setVideoTexture;var t=this.gl_getContext(fe.canvas),i=e.gl||t||window.document.getElementById("GameCanvas").getContext("webgl2")||window.document.querySelector("canvas#GameCanvas").getContext("webgl2")||window.document.querySelector("canvas#GameCanvas").getContext("webgl");if(window.document.addEventListener("DOMContentLoaded",(function(o){i=e.gl||t||window.document.getElementById("GameCanvas").getContext("webgl2")||window.document.querySelector("canvas#GameCanvas").getContext("webgl2")||window.document.querySelector("canvas#GameCanvas").getContext("webgl")})),i){var o=i,n=null,l={width:this.setDefaultWh.width,height:this.setDefaultWh.height};if(e.gl)n=e.createTexture(new s.TextureInfo(s.TextureType.TEX2D,s.TextureUsageBit.SAMPLED|s.TextureUsageBit.TRANSFER_DST,s.Format.RGBA8,l.width,l.height));else n=s.deviceManager.gfxDevice.createTexture(new s.TextureInfo(s.TextureType.TEX2D,s.TextureUsageBit.SAMPLED|s.TextureUsageBit.TRANSFER_DST,s.Format.RGBA8,l.width,l.height))||e.createTexture(new s.TextureInfo(s.TextureType.TEX2D,s.TextureUsageBit.SAMPLED|s.TextureUsageBit.TRANSFER_DST,s.Format.RGBA8,l.width,l.height));if(n){var r=n.gpuTexture;r&&(r.glWrapS=o.CLAMP_TO_EDGE,r.glWrapT=o.CLAMP_TO_EDGE,r.glMinFilter=o.LINEAR)}return this.setVideoTexture=n,n}}else this.clog(De.clogMsg.createNewVideoTextureIf)},r.createTeureOrSprImg=function(e,t){var i=e instanceof V?e:new V(e),o=new g;o.image=i;var n=new b;return n.texture=o,t?n:o},r.updateVideoTexture=function(){if(this.get_gfx_device&&(this.setVideoTexture||this.setVideoTextureRemote)&&this.video_html_element){var e=this.node.getComponent(v),t=this.node.getComponent(c);if(e)if(Ee==ve.LOCAL_本地_video){var i=new s.BufferTextureCopy;i.texExtent.width=this.setDefaultWh.width,i.texExtent.height=this.setDefaultWh.height,i.texExtent.depth=1,this.get_gfx_device.copyTexImagesToTexture([this.video_html_element],this.setVideoTexture,[i]),e&&(this.get_mat=e.getMaterialInstance(0),this.get_mat&&this.get_mat.setProperty("mainTexture",this.setVideoTexture,0))}else if(Ee==ve.REMOTE_远程_video){this.draw_sprite_canvas.width=this.setDefaultWh.width,this.draw_sprite_canvas.height=this.setDefaultWh.height;var o=this.draw_sprite_canvas.getContext("2d"),n=this.draw_sprite_canvas.width||this.setDefaultWh.width,l=this.draw_sprite_canvas.height||this.setDefaultWh.height;o.clearRect(0,0,n,l),o.drawImage(this.video_html_element,0,0,n,l);var r=new V;r.reset(this.draw_sprite_canvas);var a=this.createTeureOrSprImg(r,!1);this.setVideoTextureRemote=a,this.get_mat=e.getMaterialInstance(0),this.get_mat&&this.get_mat.setProperty("mainTexture",a,0)}if(t){this.draw_sprite_canvas.width=this.node.getComponent(T).width||this.setDefaultWh.width,this.draw_sprite_canvas.height=this.node.getComponent(T).height||this.setDefaultWh.height;var d=this.draw_sprite_canvas.getContext("2d"),m=this.draw_sprite_canvas.width||this.setDefaultWh.width,h=this.draw_sprite_canvas.height||this.setDefaultWh.height;if(d.clearRect(0,0,m,h),d.drawImage(this.video_html_element,0,0,m,h),this.node.getComponent(T).setContentSize(new x.Size(m,h)),t){var u=this.draw_sprite_canvas.toDataURL("image/png"),_=new Image,p=new V,y=this;_.src=u,_.onload=function(){p.reset(_),t.spriteFrame.texture=y.createTeureOrSprImg(p,!0).texture,t.markForUpdateRenderData()}}else if(t){var f=new V,w=new g,C=new b;f.reset(this.draw_sprite_canvas),w.image=f,C.texture=w}}}},r.clickStartPlayVideo=function(){var e=this;e.video_html_element.play(),e.pausePlayVideo?e.video_html_element.pause():e.video_html_element.play()},r.reFlashVideoInfo=function(){if(this.video_html_element){if(this.setVideoTextureReady)if(this.pausePlayVideo)this.getVideoIsnPlay&&this.video_html_element.pause();else try{this.getVideoIsnPlay=this.video_html_element.play()}catch(e){this.clog("加载视频报错=>",e)}else if(this.pausePlayVideo)this.getVideoIsnPlay&&this.video_html_element.pause();else try{var e=this;window.document.addEventListener("DOMContentLoaded",(function(t){e.getVideoIsnPlay=e.video_html_element.play()})),this.getVideoIsnPlay=this.video_html_element.play()}catch(e){this.clog("加载视频报错=>",e)}this.video_html_element.playbackRate=this.videoPlaybackRateNum,this.video_html_element.autoplay=this.autoPlayVideo,this.video_html_element.muted=this.mutedOpenBool,this.video_html_element.loop=this.loopVideoPlay,this.video_html_element.volume=this.videoVolumeNum}},r.lateUpdate=function(e){if((new Date).getTime()-this.last_timeNum>this.reFlashSpeed){this.last_timeNum=(new Date).getTime();try{this.previewVideo?(this.updateClearTextureBool=!0,this.video_html_element||this.start_add_video_element()):(this.removeVideoElement(),this.updateClearTextureBool&&(this.updateClearTextureBool=!1)),this.video_html_element&&(this.loopVideoPlay||this.video_html_element.currentTime<this.video_html_element.duration)&&(this.reFlashVideoInfo(),this.setVideoTextureReady&&(this.updateVideoTexture(),this.loadIsErrorBool=!1)),this.openLook3dVideoNodeBool&&this.updateRotation3D(e)}catch(e){this.loadIsErrorBool||(this.clog(De.clogMsg.lateUpdate_Catch,e),this.loadIsErrorBool=!0)}}},r.AngleToNormalize=function(e){for(;e>=360;)e-=360;for(;e<0;)e+=360;return e},r.EulerToNormalize=function(e){e.x=this.AngleToNormalize(e.x),e.y=this.AngleToNormalize(e.y),e.z=this.AngleToNormalize(e.z)},r.updateRotation3D=function(e){this.set_euler.x+=e*this.set_speed,this.set_euler.y+=e*this.set_speed*2,this.set_euler.z+=e*this.set_speed*3,this.EulerToNormalize(this.set_euler),p.fromEuler(this.set_quat,this.set_euler.x,this.set_euler.y,this.set_euler.z),this.node.setRotation(this.set_quat)},r.clog=function(){var e;(e=console).log.apply(e,arguments)},r.clogCl=function(){console.clear()},r.select_node_type_uuid=function(e,t){void 0===t&&(t=[this.node.uuid]),this.not_editorLog_tip()},r.not_editorLog_tip=function(e){void 0===e&&(e=!1);var t=e?["😀","😁","😃","😄","😆","😉","😊","😋","😍","😎","😏","😗","😘","😙","😚","😛","😜","😝"]:["😂","😅","😇","😈","😌","😐","😑","😒","😓","😔","😕","😖","😞","😟","😠","😡","😢","😣","😤","😥","😦","😧","😨"],i=t[Math.floor(Math.random()*t.length)];this.clog("[ im-plugin-video ][ cclogfunc ] "+i+De.clogMsg.not_editorLog_tip)},r.autoBindEditorResource=function(){},r.downLoadSomeFiles=function(){},l(t,[{key:"select_rich_type_value",get:function(){return Ee=this._select_video_type,this._select_video_type},set:function(e){this._select_video_type=e,Ee=this._select_video_type,this.destoryThisNode();var t=Math.floor(10*Math.random());Oe=t>2?Le[2]:Le[Math.floor(Math.random()*Le.length)],Oe=this.random_return_chance(Le,[35,15,2730,55,66,77,88,99,55,66,77,88,99,55,66,77,88,99,55,66]),this._remote_video_url=Oe,this.remote_video_url=Oe}},{key:"setDefaultWh",get:function(){return this._setDefaultWh},set:function(e){if(this._setDefaultWh=e,this.getComponent(T)){var t=this.getComponent(T);this.scheduleOnce((function(){t.width=e.width,t.height=e.height}),64/1.4)}}},{key:"local_video_source",get:function(){return this._local_video_source},set:function(e){this.destoryThisNode(),this._local_video_source=e}},{key:"remote_video_url",get:function(){return this._remote_video_url},set:function(e){this.destoryThisNode(),this._remote_video_url=e}},{key:"select_video_attr",get:function(){return Pe=this._simple_set_attribute?ye.简单属性设置_video:ye.更多属性设置_video,this._simple_set_attribute},set:function(e){this._simple_set_attribute=e,Pe=this._simple_set_attribute?ye.简单属性设置_video:ye.更多属性设置_video}},{key:"previewVideo",get:function(){return this._previewVideo},set:function(e){this._previewVideo=e,e?this.pausePlayVideo=!1:(this.pausePlayVideo=!0,this._showVideoDomView=!1)}},{key:"showVideoDomView",get:function(){return this._showVideoDomView},set:function(e){this._previewVideo?(this._showVideoDomView=e,e?this.video_html_element&&(this.video_html_element.style.visibility="visible",this.video_html_element.style.position="absolute",this.video_html_element.style.bottom="23px",this.video_html_element.style.left="23px",this.video_html_element.style.borderStyle="dotted solid dashed double",this.video_html_element.style.borderColor="#C8B0B4 #1761BB #F0AD4E #474747",this.video_html_element.style.borderWidth="6px 7px 8px 9px",this.video_html_element.style.borderImage="initial",this.video_html_element.style.borderRadius="55px",this.video_html_element.style.opacity="60%",this.video_html_element.style.width="233px",this.video_html_element.style.height="233px"):this.video_html_element&&(this.video_html_element.style.visibility="hidden",this.video_html_element.style.position="absolute",this.video_html_element.style.bottom="0px",this.video_html_element.style.left="0px",this.video_html_element.style.border="none",this.video_html_element.style.borderRadius="0px",this.video_html_element.style.opacity="60%",this.video_html_element.style.width="0px",this.video_html_element.style.height="0px")):this.clog("[ Video ][ DOM ][ 😧 ] "+De.clogMsg.showVideoDomView)}},{key:"videoCurrentTimeNum",get:function(){return this._videoCurrentTimeNum},set:function(e){this.video_html_element?e<=this.video_html_element.duration?(this._videoCurrentTimeNum=e,this.clog("[ video ][ 😑 ] 😉 "+De.clogMsg.videoCurrentTimeNum[0]+" => "+e+" , "+De.clogMsg.videoCurrentTimeNum[1]+" "+this.video_html_element.duration),this.video_html_element.currentTime=this.videoCurrentTimeNum):(this._videoCurrentTimeNum=this.video_html_element.duration/2,this.video_html_element.currentTime=this.videoCurrentTimeNum,this.clog("[ video ][ 😶 ] "+De.clogMsg.videoCurrentTimeNum[0]+" "+e+" "+De.clogMsg.videoCurrentTimeNum[1]+" "+this.video_html_element.duration)):this._videoCurrentTimeNum=e}}]),t}(C)).prototype,"_select_video_type",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ve.LOCAL_本地_video}}),ee=t(Z.prototype,"_simple_set_attribute",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),te=t(Z.prototype,"_previewVideo",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie=t(Z.prototype,"_videoCurrentTimeNum",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=t(Z.prototype,"_remote_video_url",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oe||"http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400"}}),ne=t(Z.prototype,"_local_video_source",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(Z.prototype,"reFlashSpeed",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 17}}),t(Z.prototype,"select_rich_type_value",[B],Object.getOwnPropertyDescriptor(Z.prototype,"select_rich_type_value"),Z.prototype),re=t(Z.prototype,"_setDefaultWh",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D(480,272)}}),t(Z.prototype,"setDefaultWh",[I],Object.getOwnPropertyDescriptor(Z.prototype,"setDefaultWh"),Z.prototype),t(Z.prototype,"local_video_source",[S],Object.getOwnPropertyDescriptor(Z.prototype,"local_video_source"),Z.prototype),t(Z.prototype,"remote_video_url",[A],Object.getOwnPropertyDescriptor(Z.prototype,"remote_video_url"),Z.prototype),se=t(Z.prototype,"appendVideoToPage",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(Z.prototype,"select_video_attr",[k],Object.getOwnPropertyDescriptor(Z.prototype,"select_video_attr"),Z.prototype),t(Z.prototype,"previewVideo",[W],Object.getOwnPropertyDescriptor(Z.prototype,"previewVideo"),Z.prototype),ae=t(Z.prototype,"_showVideoDomView",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(Z.prototype,"showVideoDomView",[G],Object.getOwnPropertyDescriptor(Z.prototype,"showVideoDomView"),Z.prototype),de=t(Z.prototype,"openLook3dVideoNodeBool",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),me=t(Z.prototype,"autoPlayVideo",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),he=t(Z.prototype,"loopVideoPlay",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ue=t(Z.prototype,"pausePlayVideo",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_e=t(Z.prototype,"mutedOpenBool",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe=t(Z.prototype,"videoPlaybackRateNum",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ce=t(Z.prototype,"videoVolumeNum",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),t(Z.prototype,"videoCurrentTimeNum",[K],Object.getOwnPropertyDescriptor(Z.prototype,"videoCurrentTimeNum"),Z.prototype),Y=Z))||Y)||Y)||Y)||Y)||Y)||Y));r._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalUniformMgr2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var n,l,e;return{setters:[function(o){n=o.createClass},function(o){l=o.cclegacy,e=o.director}],execute:function(){l._RF.push({},"a8c3dWkhINGOomCx3o24hpf","GlobalUniformMgr",void 0),o("GlobalUniformMgr",function(){function o(){this._globalUniformMap={};var o=e.root.pipeline.pipelineUBO,n=o._globalUBO,l=o._cameraUBO;this._globalUniformMap["cc_time.w"]={ubo:n,offset:3};this._globalUniformMap["cc_fogBase.w"]={ubo:l,offset:131};this._globalUniformMap["cc_fogAdd.w"]={ubo:l,offset:135};this._globalUniformMap["cc_nearFar.z"]={ubo:l,offset:138},this._globalUniformMap["cc_nearFar.w"]={ubo:l,offset:139}}var l=o.prototype;return l.resetAll=function(){for(var o=Object.keys(this._globalUniformMap),n=0;n<o.length;++n){var l=o[n],e=this._globalUniformMap[l];e.ubo[e.offset]=0}},l.setGlobalUniform=function(o,n){var l=this._globalUniformMap[o];null==l&&(console.log("can not find the global uniform info by given name:"+o),console.log("please use one of "+Object.keys(this._globalUniformMap).join(","))),l.ubo[l.offset]=n},l.getGlobalUniform=function(o){var n=this._globalUniformMap[o];return null==n&&(console.log("can not find the global uniform info by given name:"+o),console.log("please use one of "+Object.keys(this._globalUniformMap).join(","))),n.ubo[n.offset]||0},n(o,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new o),this._inst}}]),o}())._inst=null,l._RF.pop()}}}));

System.register("chunks:///_virtual/grass-bender-renderer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./config.ts"],(function(e){"use strict";var r,t,n,i,a,o,s,l,u,d,c,h,_,g,p,f,y,b,m;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.Color,u=e.gfx,d=e.Node,c=e.Material,h=e.Vec4,_=e.RenderTexture,g=e.CCObject,p=e.Vec3,f=e.Camera,y=e.renderer,b=e.Component},function(e){m=e.Config}],execute:function(){var C,v,w,x,T,P,R,z,F;o._RF.push({},"dd671dCBkxPcI6g9xHkk4yE","grass-bender-renderer",void 0);var M=s.ccclass,B=s.property,D=s.executeInEditMode,O=s.type,j=new l(127.5,0,127.5,0),k=new u.ColorAttachment(u.Format.RGBA16F),H=new u.DepthStencilAttachment,I=new u.RenderPassInfo([k],H);e("GrassBenderRenderer",(C=M("GrassBenderRenderer"),v=O(d),w=O(c),C(x=D((P=r((T=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,n(r,"followTarget",P,i(r)),n(r,"_range",R,i(r)),n(r,"_resolution",z,i(r)),n(r,"bendMaterials",F,i(r)),r._renderCamera=null,r._renderTexture=null,r._grass_bend_uv=new h,r}t(r,e);var o=r.prototype;return o._createRenderTexture=function(e){if(void 0===e&&(e=!1),e&&this._renderTexture&&(this._renderTexture.destroy(),this._renderTexture=null),!this._renderTexture){var r=new _;r.reset({width:this.resolution,height:this.resolution,passInfo:I}),this._renderTexture=r}},o._createRenderCamera=function(){if(!this._renderCamera){var e=new d("GrassBendCamera");e._objFlags|=g.Flags.DontSave|g.Flags.HideInHierarchy,e.parent=this.node,e.eulerAngles=new p(-90,0,0);var r=this.node.layer,t=e.addComponent(f);t.projection=y.scene.CameraProjection.ORTHO,t.orthoHeight=this.range,t.far=2*this.range,t.clearColor=j,t.clearFlags=u.ClearFlagBit.NONE,t.visibility=r,t.priority=-100,t.targetTexture=this._renderTexture,this._renderCamera=t}},o._updateMaterials=function(){var e=this.bendMaterials,r=this.renderCamera.node.worldPosition;this._grass_bend_uv.set(r.x,r.z,2*this.range,1);for(var t=0;t<e.length;t++)e[t].setProperty("grass_bend_map",this._renderTexture),e[t].setProperty("grass_bend_uv",this._grass_bend_uv)},o.start=function(){this.setEditorCameraVisibility(),m.supportBendGrass?(this._createRenderTexture(),this._createRenderCamera()):this.node.active=!1},o.onDisable=function(){var e=this.bendMaterials;this._grass_bend_uv.w=0;for(var r=0;r<e.length;r++)e[r].setProperty("grass_bend_uv",this._grass_bend_uv)},o.setEditorCameraVisibility=function(){},o.update=function(e){if(this.followTarget&&this._renderCamera){var r=this.followTarget.worldPosition,t=this._renderCamera.node.worldPosition;r.x===t.x&&r.y+this.range===t.y&&r.z===t.z||this._renderCamera.node.setWorldPosition(r.x,r.y+this.range,r.z),this._updateMaterials()}},a(r,[{key:"range",get:function(){return this._range},set:function(e){this._range=e,this._renderCamera&&(this._renderCamera.orthoHeight=this.range)}},{key:"resolution",get:function(){return this._resolution},set:function(e){e!==this._resolution&&(this._resolution=e,this._createRenderTexture(!0))}},{key:"renderCamera",get:function(){return this._renderCamera}}]),r}(b)).prototype,"followTarget",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(T.prototype,"_range",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 32}}),r(T.prototype,"range",[B],Object.getOwnPropertyDescriptor(T.prototype,"range"),T.prototype),z=r(T.prototype,"_resolution",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 512}}),r(T.prototype,"resolution",[B],Object.getOwnPropertyDescriptor(T.prototype,"resolution"),T.prototype),F=r(T.prototype,"bendMaterials",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=T))||x)||x));o._RF.pop()}}}));

System.register("chunks:///_virtual/hero.ts",["./rollupPluginModLoBabelHelpers.js","cc","./input.ts","./joy-stick.ts","./orbit-camera.ts"],(function(t){"use strict";var i,e,n,o,a,r,s,l,c,u,h,m,g,d,p,_,y,S,b,f,C,k,A,w;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Vec3,l=t.Animation,c=t.SkeletalAnimation,u=t.RigidBody,h=t.Label,m=t.BoxCollider,g=t.systemEvent,d=t.SystemEventType,p=t.Node,_=t.macro,y=t.AnimationClip,S=t.lerp,b=t.find,f=t.Component,C=t.Camera},function(t){k=t.default},function(t){A=t.JoyStick},function(t){w=t.default}],execute:function(){var B,v,U,x,j,z,R,O,E,T,I,K,M,P,F,L,Y,D,H,N,J,V;a._RF.push({},"75021RAEFlO6L9sHk+IyS9C","hero",void 0);var W=r.ccclass,q=r.property,G=r.type,Q=new s;t("Hero",(B=W("Hero"),v=G(l),U=G(c),x=G(u),j=G(A),z=G(w),R=G(h),B((T=i((E=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,n(i,"moveSpeed",T,o(i)),n(i,"runSpeed",I,o(i)),n(i,"animation",K,o(i)),n(i,"cocosAnim",M,o(i)),n(i,"rigidBody",P,o(i)),n(i,"joyStick",F,o(i)),n(i,"jumpForce",L,o(i)),n(i,"orbitCamera",Y,o(i)),n(i,"msgLabel",D,o(i)),i.jumping=!1,i.speed=new s,i.targetSpeed=new s,i.rotation=0,i.targetRotation=45,i._currentAnim="",i._currentCollider=null,n(i,"idle_anim",H,o(i)),n(i,"run_anim",N,o(i)),n(i,"walk_anim",J,o(i)),i.change_animation_IOS="stand_out",i.count=1,n(i,"Camera_no_UBA",V,o(i)),i.is_UBA=!1,i}e(i,t);var a=i.prototype;return a.start=function(){var t;(this.Camera_No_UBA(),1==this.node.getComponent(c).useBakedAnimation)?(null==(t=this.node.getComponent(c))||t.play("walking1122"),console.log(this.node.name+":   UBA has been opened, implement the UBA script")):console.log(this.node.name+":   UBA is not opened, implement the orignal script");var i=this.getComponent(m);i&&(i.on("onCollisionEnter",this.onCollision,this),i.on("onCollisionStay",this.onCollision,this),i.on("onCollisionExit",this.onCollisionExit,this)),g.on(d.KEY_UP,this.onKeyUp,this),g.on(d.KEY_DOWN,this.onKeyDown,this),this.joyStick&&this.joyStick.node.on(p.EventType.TOUCH_START,this.onJoyStickTouchStart,this)},a.onKeyDown=function(t){switch(t.keyCode){case _.KEY.up:case _.KEY.w:case _.KEY.down:case _.KEY.s:this.orbitCamera}},a.onKeyUp=function(t){switch(t.keyCode){case _.KEY.down:case _.KEY.s:this.targetRotation+=180}},a.onJoyStickTouchStart=function(){this.orbitCamera},a.onCollision=function(t){var i=t.otherCollider;this._currentCollider=i},a.onCollisionExit=function(t){this._currentCollider=null},a.play=function(t){if(this.animation){if(this._currentAnim===t)if(this.animation.getState(t).wrapMode!==y.WrapMode.Normal)return;this._currentAnim=t,this.animation.crossFade(t,.1)}},a.onAnimationStop=function(t,i){"UnarmedJumpRunning"===i.name&&(this.jumping=!1)},a.update=function(t){var i,e;"walking"==this.change_animation_IOS&&1==this.node.getComponent(c).useBakedAnimation&&(null==(i=this.node.getComponent(c))||i.play("walking1122"),this.change_animation_IOS="stand_by_stand",console.log(this.node.name+"    :UBA_Open_walk"));"stand_out"==this.change_animation_IOS&&1==this.node.getComponent(c).useBakedAnimation&&(null==(e=this.node.getComponent(c))||e.play("idle1122"),this.change_animation_IOS="stand_by_walk",console.log(this.node.name+"     :UBA_Open_stand"));var n=!1,o=this.speed,a=this.moveSpeed;k.key.shift?a=this.runSpeed:this.joyStick&&(a=this.moveSpeed+(.8*this.runSpeed-this.moveSpeed)*this.joyStick.magnitude),this.targetSpeed.x=this.targetSpeed.z=0,k.key.left?this.targetRotation+=180*t:k.key.right?this.targetRotation-=180*t:this.joyStick&&(this.targetRotation=this.joyStick.rotation+this.orbitCamera.targetRotation.y);var r=this.targetRotation*Math.PI/180;(k.key.up||this.joyStick&&this.joyStick.magnitude>0)&&(this.targetSpeed.x=a*Math.sin(r),this.targetSpeed.z=a*Math.cos(r),n=!0);var l=0;k.key.down&&(this.targetSpeed.x=-a*Math.sin(r),this.targetSpeed.z=-a*Math.cos(r),n=!0,l=180),s.lerp(o,o,this.targetSpeed,5*t),n?Math.abs(this.runSpeed-a)<=5?1==this.node.getComponent(c).useBakedAnimation?("stand_by_walk"==this.change_animation_IOS&&(this.count=0),0==this.count&&(this.change_animation_IOS="walking",this.count=1)):(this.cocosAnim.crossFade(this.run_anim,.5),console.log(this.node.name+"    :UBA_Close_walk")):1==this.node.getComponent(c).useBakedAnimation?("stand_by_walk"==this.change_animation_IOS&&(this.count=0),0==this.count&&(this.change_animation_IOS="walking",this.count=1)):(this.cocosAnim.crossFade(this.walk_anim,.5),console.log(this.node.name+"    :UBA_Close_walk")):(o.x=o.z=0,1==this.node.getComponent(c).useBakedAnimation?("stand_by_stand"==this.change_animation_IOS&&(this.count=0),0==this.count&&(this.change_animation_IOS="stand_out",this.count=1)):(this.cocosAnim.crossFade(this.idle_anim,.5),console.log(this.node.name+"    :UBA_Close_stand"))),this.joyStick?this.rotation=this.targetRotation+l:this.rotation=S(this.rotation,this.targetRotation+l,5*t),this.rigidBody.getLinearVelocity(Q),o.y=Q.y,o.y>0&&(o.y=0),this.rigidBody.setLinearVelocity(o),this.node.eulerAngles=Q.set(0,this.rotation,0),this.msgLabel.string=n?"moving:"+this.joyStick.rotation.toString()+"\n"+this.orbitCamera.targetRotation.y.toString()+"\n"+this.targetRotation.toString():"stop:"+this.joyStick.rotation.toString()+"\n"+this.orbitCamera.targetRotation.y.toString()+"\n"+this.targetRotation.toString()},a.Camera_No_UBA=function(){var t=this;setTimeout((function(){var i,e,n,o,a;"84,118,83,255"==(null==(i=t.Camera_no_UBA.targetTexture.readPixels(1,1,1,1))?void 0:i.toString())||"84,119,83,255"==(null==(e=t.Camera_no_UBA.targetTexture.readPixels(1,1,1,1))?void 0:e.toString())||"84,119,83,255"==(null==(n=t.Camera_no_UBA.targetTexture.readPixels(1,1,1,1))?void 0:n.toString())||"85,119,84,255"==(null==(o=t.Camera_no_UBA.targetTexture.readPixels(1,1,1,1))?void 0:o.toString())||"84,119,84,255"==(null==(a=t.Camera_no_UBA.targetTexture.readPixels(1,1,1,1))?void 0:a.toString())?console.log("true"):(console.log(t.Camera_no_UBA.targetTexture.readPixels(1,1,1,1)),b("Main Camera").getComponent(w).target=b("Customer_UBA/Target"),b("Customer_UBA").active=!0,b("Customer").active=!1,console.log("switch to the UBA_Open "),t.is_UBA=!0)}),50)},i}(f)).prototype,"moveSpeed",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),I=i(E.prototype,"runSpeed",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),K=i(E.prototype,"animation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(E.prototype,"cocosAnim",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(E.prototype,"rigidBody",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(E.prototype,"joyStick",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(E.prototype,"jumpForce",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),Y=i(E.prototype,"orbitCamera",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(E.prototype,"msgLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(E.prototype,"idle_anim",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"cocos_anim_idle"}}),N=i(E.prototype,"run_anim",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"cocos_anim_run"}}),J=i(E.prototype,"walk_anim",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"cocos_anim_walk"}}),V=i(E.prototype,"Camera_no_UBA",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new C}}),O=E))||O));a._RF.pop()}}}));

System.register("chunks:///_virtual/input.ts",["cc"],(function(e){"use strict";var s,t,i,a,c,o;return{setters:[function(e){s=e.cclegacy,t=e.game,i=e.Game,a=e.systemEvent,c=e.SystemEventType,o=e.macro}],execute:function(){s._RF.push({},"3c644EhyyBO4bFAFZz56gLy","input",void 0);var r=e("default",new(function(){function e(){this.key={left:!1,right:!1,up:!1,down:!1,space:!1,shift:!1},this.moveDir=0,this.moveForward=0,this.moveBack=0,this.moveBrake=0}var s=e.prototype;return s.registerEvents=function(){a.on(c.KEY_DOWN,this.onKeyDown,this),a.on(c.KEY_UP,this.onKeyUp,this)},s.onKeyDown=function(e){switch(e.keyCode){case o.KEY.left:case o.KEY.a:this.key.left=!0;break;case o.KEY.right:case o.KEY.d:this.key.right=!0;break;case o.KEY.up:case o.KEY.w:this.key.up=!0,this.moveForward=1;break;case o.KEY.down:case o.KEY.s:this.key.down=!0,this.moveBack=1;break;case o.KEY.space:this.key.space=!0,this.moveBrake=1;break;case o.KEY.shift:this.key.shift=!0}},s.onKeyUp=function(e){switch(e.keyCode){case o.KEY.left:case o.KEY.a:this.key.left=!1;break;case o.KEY.right:case o.KEY.d:this.key.right=!1;break;case o.KEY.up:case o.KEY.w:this.key.up=!1,this.moveForward=0;break;case o.KEY.down:case o.KEY.s:this.key.down=!1,this.moveBack=0;break;case o.KEY.space:this.key.space=!1,this.moveBrake=0;break;case o.KEY.shift:this.key.shift=!1}},e}()));t.on(i.EVENT_GAME_INITED,(function(){r.registerEvents()})),s._RF.pop()}}}));

System.register("chunks:///_virtual/joy-stick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,r,s,u,c,a,l,h,p,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,u=t.Vec3,c=t.Vec2,a=t.math,l=t.Node,h=t.UITransform,p=t.view,d=t.Component}],execute:function(){var m,g,S,y,f,_,v,E,j,R,z,b;r._RF.push({},"0df005HeCFHbLgcmwtx6QL2","joy-stick",void 0);var C=s.ccclass,T=s.property,O=new u,w=new c,x=new a.Size;t("JoyStick",(m=C("JoyStick"),g=T({type:l}),S=T({type:l}),y=T({type:l}),f=T({type:l}),m((E=i((v=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"maxRadius",E,o(i)),n(i,"control",j,o(i)),n(i,"controlBg",R,o(i)),n(i,"jumpBtn",z,o(i)),n(i,"jumpWidget",b,o(i)),i.direction=new u,i.magnitude=0,i.rotation=0,i.jump=!1,i._currentScreenVerticle=!0,i._originRadius=0,i._originSize=0,i}e(i,t);var r=i.prototype;return r.start=function(){var t;this.node.on(l.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(l.EventType.TOUCH_END,this.touchEnd,this),this.node.on(l.EventType.TOUCH_CANCEL,this.touchEnd,this),this.jumpBtn&&(this.jumpBtn.on(l.EventType.TOUCH_START,this.jumpStart,this),this.jumpBtn.on(l.EventType.TOUCH_CANCEL,this.jumpStop,this),this.jumpBtn.on(l.EventType.TOUCH_END,this.jumpStop,this)),this._originSize=(null==(t=this.node.getComponent(h))?void 0:t.contentSize.width)||0,this._originRadius=this.maxRadius,this.updateScreen()},r.update=function(){this.updateScreen()},r.updateScreen=function(){var t=p.getFrameSize(),i=this._currentScreenVerticle;t.width>t.height?this._currentScreenVerticle=!1:this._currentScreenVerticle=!0;var e,n,o,r,s,c,a,l;i!=this._currentScreenVerticle&&(this._currentScreenVerticle?(O.set(2,2,2),x.set(2*this._originSize,2*this._originSize),null==(e=this.node.getComponent(h))||e.setContentSize(x),this.maxRadius=2*this._originRadius,null==(n=this.control)||n.setScale(O),null==(o=this.controlBg)||o.setScale(O),null==(r=this.jumpWidget)||r.setScale(O)):(null==(s=this.control)||s.setScale(u.ONE),null==(c=this.controlBg)||c.setScale(u.ONE),this.maxRadius=this._originRadius,null==(a=this.jumpWidget)||a.setScale(u.ONE),x.set(this._originSize,this._originSize),null==(l=this.node.getComponent(h))||l.setContentSize(x)))},r.touchMove=function(t){if(this.control){t.getLocation(w);var i=w.x/p.getScaleX(),e=w.y/p.getScaleY();this.node.getWorldPosition(O),O.set(i-O.x,e-O.y,0),u.subtract(this.direction,O,u.ZERO),this.direction.normalize();var n=u.distance(O,u.ZERO);n>=this.maxRadius&&(n=this.maxRadius),this.magnitude=n/this.maxRadius,u.multiplyScalar(O,this.direction,n),u.add(O,u.ZERO,O),this.rotation=-Math.atan2(this.direction.x,this.direction.y)*(180/Math.PI),this.control.setPosition(O)}},r.touchEnd=function(t){this.control&&(this.rotation=0,this.magnitude=0,this.direction.set(u.ZERO),this.control.setPosition(u.ZERO))},r.jumpStart=function(){this.jump=!0},r.jumpStop=function(){this.jump=!1},i}(d)).prototype,"maxRadius",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),j=i(v.prototype,"control",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(v.prototype,"controlBg",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(v.prototype,"jumpBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(v.prototype,"jumpWidget",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=v))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,r,a,s,l,c,p,u,y,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.CameraComponent,l=t.UITransformComponent,c=t.Node,p=t.CCFloat,u=t.Vec2,y=t.Vec3,f=t.Component}],execute:function(){var h,m,b,d,v,g,_,w,k,x,C,N,T,z,R;r._RF.push({},"212e5pDMGVLa5f4YRGissJF","Joystick",void 0);var j=a.ccclass,L=a.property;t("default",(h=j("Joystick"),m=L({displayName:"canvas下的相机，只拍UI的那个",tooltip:"canvas下的相机，只拍UI的那个",type:s}),b=L({displayName:"父节点",tooltip:"摇杆中心点和背景的父节点，需要用这个节点来做坐标转换",type:l}),d=L({displayName:"摇杆背景",tooltip:"摇杆背景",type:c}),v=L({displayName:"摇杆中心点",tooltip:"摇杆中心点",type:c}),g=L({displayName:"最大半径",tooltip:"摇杆移动的最大半径",type:p}),_=L({displayName:"是否禁用摇杆",tooltip:"是否禁用摇杆，禁用后摇杆将不能摇动"}),h((x=i((k=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(i,"camera",x,o(i)),n(i,"parent",C,o(i)),n(i,"bg",N,o(i)),n(i,"joystick",T,o(i)),n(i,"max_R",z,o(i)),n(i,"is_forbidden",R,o(i)),i.vector=new u(0,0),i}e(i,t);var r=i.prototype;return r.onLoad=function(){this.bg.on(c.EventType.TOUCH_MOVE,this.move,this),this.bg.on(c.EventType.TOUCH_END,this.finish,this),this.bg.on(c.EventType.TOUCH_CANCEL,this.finish,this)},r.move=function(t){if(0==this.is_forbidden){var i=new u(t.getLocationX(),t.getLocationY()),e=this.camera.screenToWorld(new y(i.x,i.y)),n=this.parent.convertToNodeSpaceAR(new y(e.x,e.y));if(n.length()<this.max_R)this.joystick.setPosition(n.x,n.y);else{var o=n.normalize(),r=o.x*this.max_R,a=o.y*this.max_R;this.joystick.setPosition(r,a)}this.vector=new u(this.joystick.position.x,this.joystick.position.y)}else this.finish()},r.finish=function(){this.joystick.position=new y(0,0),this.vector=new u(0,0)},i}(f)).prototype,"camera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(k.prototype,"parent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(k.prototype,"bg",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(k.prototype,"joystick",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(k.prototype,"max_R",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 135}}),R=i(k.prototype,"is_forbidden",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=k))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/label-3d.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,s,n,a,h,r,o,u,_,l,c,p,d,g,v,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){h=t.cclegacy,r=t._decorator,o=t.Material,u=t.Size,_=t.Vec2,l=t.CanvasPool,c=t.MeshRenderer,p=t.utils,d=t.ImageAsset,g=t.Texture2D,v=t.RenderTexture,m=t.Component}],execute:function(){var x,f,R,y,M,D,w;h._RF.push({},"02c9anVPBhAz6XicLB/YNhw","label-3d",void 0);var S=r.ccclass,z=r.property,b=r.executeInEditMode,P=t("BASELINE_RATIO",.26);t("Label3D",(x=S("Label3D"),f=z({displayOrder:2,multiline:!0}),R=z({type:o,displayOrder:2}),x(y=b((D=e((M=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),h=0;h<i;h++)a[h]=arguments[h];return e=t.call.apply(t,[this].concat(a))||this,s(e,"_string",D,n(e)),s(e,"_material",w,n(e)),e._splitStrings=[],e._assemblerData=null,e._context=null,e._canvas=null,e._texture=null,e._meshRender=null,e._canvasSize=new u,e._worldBounds=null,e._uvs=[],e._positions=[],e._startPosition=new _,e}i(e,t);var h=e.prototype;return h.onLoad=function(){this.initMeshRender()},h.onEnable=function(){this._assemblerData=l.getInstance().get(),this.updateRenderData()},h.start=function(){this.updateRenderData()},h.updateRenderData=function(){this._assemblerData&&(this._context=this._assemblerData.context,this._canvas=this._assemblerData.canvas,this.initTexture2D(),this.updateFontFormatting(),this.updateFontCanvasSize(),this.updateRenderMesh(),this.updateFontRenderingStyle(),this.updateTexture(),this.updateMaterial(),this.resetRenderData())},h.initMeshRender=function(){this._meshRender=this.node.getComponent(c),this._meshRender||(this._meshRender=this.node.addComponent(c)),this.initRenderMesh()},h.initRenderMesh=function(){var t;this._positions.push(-.5,-.5,0),this._uvs.push(0,1),this._positions.push(.5,-.5,0),this._uvs.push(1,1),this._positions.push(-.5,.5,0),this._uvs.push(0,0),this._positions.push(-.5,.5,0),this._uvs.push(0,0),this._positions.push(.5,-.5,0),this._uvs.push(1,1),this._positions.push(.5,.5,0),this._uvs.push(1,0),this._meshRender.mesh=p.MeshUtils.createMesh({positions:this._positions,uvs:this._uvs,minPos:{x:-.5,y:-.5,z:0},maxPos:{x:.5,y:.5,z:0}}),null==(t=this._meshRender.model)||t.updateWorldBound(),this.updateMeshRenderMaterial()},h.updateMeshRenderMaterial=function(){this._meshRender&&this._material&&(this._meshRender.material=this._material)},h.initTexture2D=function(){if(!this._texture){var t=new d(this._canvas);this._texture=new g,this._texture.image=t}},h.updateTexture=function(){if(this._context&&this._canvas){this._context.clearRect(0,0,this._canvas.width,this._canvas.height);for(var t=0,e=0,i=0;i<this._splitStrings.length;i++){e=this._startPosition.y+(i+1)*this.getLineHeight();var s=this._context.measureText(this._splitStrings[i]).width;t=(this._canvas.width-s)/2,this._context.fillText(this._splitStrings[i],t,e)}0!==this._canvas.width&&0!==this._canvas.height&&(this._texture.reset({width:this._canvas.width,height:this._canvas.height,mipmapLevel:1}),this._texture.uploadData(this._canvas),this._texture.setWrapMode(v.WrapMode.CLAMP_TO_EDGE,v.WrapMode.CLAMP_TO_EDGE))}},h.updateMaterial=function(){this._texture&&(this._meshRender&&this._material&&this._meshRender.getMaterialInstance(0).setProperty("mainTexture",this._texture))},h.updateFontFormatting=function(){if(this._context){var t=this._string.split("\\n");this._splitStrings=t;for(var e=0;e<t.length;e++){var i=this._context.measureText(t[e]).width;i>this._canvasSize.width&&(this._canvasSize.width=i)}this._canvasSize.height=t.length*this.getLineHeight()+P*this.getLineHeight()}},h.updateFontCanvasSize=function(){this._canvasSize.width=Math.min(this._canvasSize.width,2048),this._canvasSize.height=Math.min(this._canvasSize.height,2048),this._canvas.width!=this._canvasSize.width&&(this._canvas.width=this._canvasSize.width),this._canvas.height!=this._canvasSize.height&&(this._canvas.height=this._canvasSize.height),this._context.font=this.getFontDesc()},h.updateFontRenderingStyle=function(){this._context.font=this.getFontDesc(),this._context.lineJoin="round",this._context.textAlign="left",this._context.textBaseline="alphabetic",this._context.fillStyle="rgba(255, 255, 255, 255)"},h.updateRenderMesh=function(){var t,e=this._canvas.width/this._canvas.height;this._positions=[],this._positions.push(-.5*e,-.5,0),this._positions.push(.5*e,-.5,0),this._positions.push(-.5*e,.5,0),this._positions.push(-.5*e,.5,0),this._positions.push(.5*e,-.5,0),this._positions.push(.5*e,.5,0),this._meshRender.mesh=p.MeshUtils.createMesh({positions:this._positions,uvs:this._uvs,minPos:{x:-.5,y:-.5,z:0},maxPos:{x:.5,y:.5,z:0}}),null==(t=this._meshRender.model)||t.updateWorldBound(),this.updateMeshRenderMaterial()},h.getLineHeight=function(){return 50},h.getFontDesc=function(){return"50px ","Arial","50px Arial"},h.resetRenderData=function(){this._canvasSize.width=0,this._canvasSize.height=0},h.update=function(t){},h.onDisable=function(){this._assemblerData&&l.getInstance().put(this._assemblerData),this._meshRender=null},a(e,[{key:"string",get:function(){return this._string},set:function(t){t=null==t?"":t.toString(),this._string!==t&&(this._string=t,this.updateRenderData())}},{key:"material",get:function(){return this._material},set:function(t){this._material=t,this.updateMeshRenderMaterial()}}]),e}(m)).prototype,"_string",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(M.prototype,"string",[f],Object.getOwnPropertyDescriptor(M.prototype,"string"),M.prototype),w=e(M.prototype,"_material",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(M.prototype,"material",[R],Object.getOwnPropertyDescriptor(M.prototype,"material"),M.prototype),y=M))||y)||y));h._RF.pop()}}}));

System.register("chunks:///_virtual/load_to_main.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var e,t,o,r,a,i,c,s,l;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,r=n.find,a=n.AudioSource,i=n.director,c=n.ProgressBar,s=n.Label,l=n.Component}],execute:function(){var u;t._RF.push({},"b8f92Csf3BIcp7eE49fWM3j","load_to_main",void 0);var p=o.ccclass;o.property,n("load_to_main",p("load_to_main")(u=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var o=t.prototype;return o.start=function(){var n,e,t=this;null==(n=r("Canvas"))||null==(e=n.getComponent(a))||e.play(),i.preloadScene("car1204",(function(n,e){var o=n/e;t.node.getComponent(c).progress=o,t.node.getChildByName("Label").getComponent(s).string="Loading:  "+parseInt(100*o+"")+"%"}),(function(){i.loadScene("car1204"),t.node.getChildByName("Label").getComponent(s).string="Optimizing, please wait. . ."}))},o.onLoad=function(){},o.switch_scene=function(){},t}(l))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/lod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./config.ts"],(function(e){"use strict";var t,i,r,n,o,s,a,l,c,u,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Vec3,l=e.Mesh,c=e.Node,u=e.MeshRenderer,h=e.Component},function(e){d=e.Config}],execute:function(){var f,p,g,m,b,y,v,w,R,L,z,C,M;o._RF.push({},"3c93bBUilhMIZi2Tams1LPw","lod",void 0);var P=s.ccclass,_=s.property,D=s.type,I=s.executeInEditMode,k=new a,x=new a,B=e("LodConfig",(f=P("LodConfig"),p=D(l),f((b=t((m=function(){i(this,"mesh",b,this),i(this,"distance",y,this)}).prototype,"mesh",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(m.prototype,"distance",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=m))||g));e("Lod",(v=P("Lod"),w=D(B),R=D(c),v(L=I((C=t((z=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"lods",C,n(t)),i(t,"target",M,n(t)),t.meshRenderer=null,t}r(t,e);var o=t.prototype;return o.start=function(){this.meshRenderer=this.getComponent(u)},o.update=function(){if(this.meshRenderer&&this.target){var e=this.lods,t=e.length-1;if(d.lod){for(var i=a.distance(this.node.getWorldPosition(k),this.target.getWorldPosition(x)),r=0;r<e.length;r++)if(i<e[r].distance){t=r;break}}else t=0;var n=e[t];n&&this.meshRenderer.mesh!==n.mesh&&(this.meshRenderer.mesh=n.mesh)}},t}(h)).prototype,"lods",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(z.prototype,"target",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=z))||L)||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Audio_Action_Control.ts","./Poster_Wall.ts","./load_to_main.ts","./migrate-canvas.ts","./GlobalUniformMgr2.ts","./Mirror.ts","./MirrorTest.ts","./Joystick.ts","./Player.ts","./SelfRotating.ts","./ThirdPersonCamera.ts","./ThirdPersonController.ts","./UI.ts","./label-3d.ts","./ear-cut.ts","./math-tool.ts","./catmull-rom-curve.ts","./curve.ts","./spline-curve.ts","./spline-mrg.ts","./EnvMapUsage.ts","./hero.ts","./grass-bender-renderer.ts","./buoyancy-manager.ts","./buoyancy-object.ts","./buoyancy-point.ts","./gerstner.ts","./button-to-toggle.ts","./fullscreen.ts","./setting.ts","./config.ts","./distribute-grid.ts","./input.ts","./joy-stick.ts","./lod.ts","./orbit-camera.ts","./SettingsUI.ts","./TestApp.ts","./CarLightTest.ts","./GL_PlayVideo.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/math-tool.ts",["cc"],(function(t){"use strict";var e,n,r,o;return{setters:[function(t){e=t.cclegacy,n=t._decorator,r=t.Vec3,o=t.Quat}],execute:function(){var i,a;e._RF.push({},"5cb7aRfho9EIow2kv/EAb0W","math-tool",void 0);var c=n.ccclass;n.property,t("MathTool",c("MathTool")(((a=function(){function t(){}return t.getRad=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},t.getDis=function(t,e){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(o,2))},t.getDisVec2=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))},t.radToAngle=function(t){return 180*t/Math.PI},t.getWorldEulerAngles=function(t){var e=t.getWorldRS(),n=new o;e.getRotation(n);var i=new r(0,0,0);return n.getEulerAngles(i),i},t.IsInView=function(t,e){return this._tempVecInView=t.getWorldPosition(),this._tempDirVecInView=e.clone().subtract(this._tempVecInView),this._tempForwardInView=t.forward,r.dot(this._tempForwardInView,this._tempDirVecInView)>0},t}())._tempVecInView=new r,a._tempDirVecInView=new r,a._tempForwardInView=new r,i=a))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var n,e,t,i,r,o;return{setters:[function(a){n=a.cclegacy,e=a.director,t=a.Director,i=a.Canvas,r=a.Camera,o=a.game}],execute:function(){n._RF.push({},"022bf6Box9Jkp53wZ/R70RZ","migrate-canvas",void 0);var a=1048575;function c(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,c(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,l,s=null==(n=e.getScene())?void 0:n.children,m=null==(t=e.getScene())?void 0:t.getComponentsInChildren(i);if(!(m.length<=1)){m=m.filter((function(n){return!!n.cameraComponent}));var u=null==(l=e.getScene())?void 0:l.getComponentsInChildren(r),v=0;u.forEach((function(n){return v|=n.visibility&a}));for(var p=[],f=0,C=s.length;f<C;f++){var h=s[f];if(o.isPersistRootNode(h)){var d=h.getComponentsInChildren(i);0!==d.length&&p.push.apply(p,d.filter((function(n){return!!n.cameraComponent})))}}p.forEach((function(n){if(m.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&a}))){var e=~v,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,c(n.node,t),v|=e}}))}}));var l=cc.Node.prototype.setParent;function s(n){var e=null,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=s(n.parent)),e)}cc.Node.prototype.setParent=function(n,e){if(l.call(this,n,e),n){var t=s(this);t&&(this.layer=t,c(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/Mirror.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalUniformMgr2.ts"],(function(e){"use strict";var t,r,i,o,a,n,s,m,l,_,c,h,d,p,f,u,C,R,w,g,v,V;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,n=e._decorator,s=e.Camera,m=e.v3,l=e.quat,_=e.mat4,c=e.RenderTexture,h=e.screen,d=e.gfx,p=e.Texture2D,f=e.Node,u=e.director,C=e.MeshRenderer,R=e.PipelineEventType,w=e.Vec3,g=e.Quat,v=e.Component},function(e){V=e.GlobalUniformMgr}],execute:function(){var M,E,P,y,A;a._RF.push({},"88dd3bqDfNHc7qAxHLLC5+N","Mirror",void 0);var b=n.ccclass,D=n.property;e("Mirror",(M=b("Mirror"),E=D({type:s}),M((A=t((y=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a))||this,i(t,"mainCamera",A,o(t)),t._refelctionCamera=null,t._mesh=null,t._tmpV3_0=m(),t._tmpV3_1=m(),t._tmpV3_N=m(),t._tmpQuat=l(),t._tmpMat4=_(),t}r(t,e);var a=t.prototype;return a.start=function(){var e=this,t=new c,r=h.windowSize;t.reset({width:r.width,height:r.height,passInfo:new d.RenderPassInfo([new d.ColorAttachment(d.Format.RGBA8)],new d.DepthStencilAttachment(d.Format.DEPTH_STENCIL))}),t.setFilters(p.Filter.LINEAR,p.Filter.LINEAR),t.setWrapMode(p.WrapMode.MIRRORED_REPEAT,p.WrapMode.MIRRORED_REPEAT);var i=new f;u.getScene().addChild(i),this._refelctionCamera=i.addComponent(s),this._refelctionCamera.clearFlags=s.ClearFlag.SKYBOX,this._refelctionCamera.priority=this.mainCamera.priority-1,this._refelctionCamera.targetTexture=t,this._mesh=this.node.getComponent(C),this._mesh.material.setProperty("reflectionMap",t);var o=V.inst;u.root.pipeline.on(R.RENDER_CAMERA_BEGIN,(function(t){if(t.node._id==e._refelctionCamera.node._id){var r=e._mesh.node.forward;r=r.normalize();var i=-w.dot(e._mesh.node.worldPosition,r);o.setGlobalUniform("cc_fogBase.w",-r.x),o.setGlobalUniform("cc_nearFar.z",-r.y),o.setGlobalUniform("cc_nearFar.w",-r.z),o.setGlobalUniform("cc_time.w",-i),o.setGlobalUniform("cc_fogAdd.w",1),e._mesh.enabled=!1,u.getScene().emit("reflection_mode")}else t.node._id==e.mainCamera.node._id&&(u.getScene().emit("scene_mode"),o.resetAll())})),u.root.pipeline.on(R.RENDER_CAMERA_END,(function(t){t.node._id==e._refelctionCamera.node._id&&(e._mesh.enabled=!0)}))},a.getMirrorPoint=function(e,t,r,i){null==e&&(e=new w);var o=w.dot(t,r)-i,a=m(r);return a.multiplyScalar(2*o),w.subtract(e,t,a),e},a.lateUpdate=function(){if(this.mainCamera&&this._mesh&&this._refelctionCamera&&this._refelctionCamera.node.active){var e=this.mainCamera.node,t=this._refelctionCamera.node,r=this._mesh.node.worldPosition;w.transformQuat(this._tmpV3_N,w.FORWARD,this._mesh.node.worldRotation);var i=this._tmpV3_N;i.negative(),i.normalize();var o=w.dot(r,i);this.getMirrorPoint(this._tmpV3_0,e.worldPosition,i,o),t.worldPosition=this._tmpV3_0,w.transformQuat(this._tmpV3_0,w.FORWARD,e.worldRotation),this._tmpV3_0.set(e.forward),this._tmpV3_0.normalize(),this.getMirrorPoint(this._tmpV3_0,this._tmpV3_0,i,0),this._tmpV3_0.normalize(),this._tmpV3_0.negative(),w.transformQuat(this._tmpV3_1,w.UP,e.worldRotation),this._tmpV3_1.normalize(),this.getMirrorPoint(this._tmpV3_1,this._tmpV3_1,i,0),this._tmpV3_1.normalize(),g.fromViewUp(this._tmpQuat,this._tmpV3_0,this._tmpV3_1),t.worldRotation=this._tmpQuat,this._refelctionCamera.node.setWorldScale(e.worldScale),this.syncCameraParameters(this._refelctionCamera,this.mainCamera)}},a.syncCameraParameters=function(e,t){e.fov=t.fov},t}(v)).prototype,"mainCamera",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=y))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/MirrorTest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,r,e,o,n,a,s,m,l,p,_,u,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Node,m=t.v3,l=t.quat,p=t.mat4,_=t.Vec3,u=t.Quat,h=t.Component}],execute:function(){var c,V,f,d,g,w,v,y;n._RF.push({},"73bc73cEWpBh7w0fwSCjjGT","MirrorTest",void 0);var M=a.ccclass,R=a.property,z=a.executeInEditMode;t("MirrorTest",(c=M("MirrorTest"),V=z(),f=R({type:s}),d=R({type:s}),c(g=V((v=i((w=function(t){function i(){for(var i,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,e(i,"target",v,o(i)),e(i,"plane",y,o(i)),i._tmpV3_0=m(),i._tmpV3_1=m(),i._tmpV3_N=m(),i._tmpQuat=l(),i._tmpMat4=p(),i.lastTime=Date.now(),i}r(i,t);var n=i.prototype;return n.start=function(){},n.getMirrorPoint=function(t,i,r,e){null==t&&(t=new _);var o=_.dot(i,r)-e,n=m(r);return n.multiplyScalar(2*o),_.subtract(t,i,n),t},n.update=function(t){if(!(Date.now()<this.lastTime+2e3)&&(this.lastTime=Date.now(),this.target&&this.plane)){_.transformQuat(this._tmpV3_N,_.FORWARD,this.plane.worldRotation);var i=this._tmpV3_N;i.normalize();var r=_.dot(this.plane.worldPosition,i);this.getMirrorPoint(this._tmpV3_0,this.target.worldPosition,i,r),this.node.worldPosition=this._tmpV3_0,_.transformQuat(this._tmpV3_0,_.FORWARD,this.target.worldRotation),this._tmpV3_0.normalize(),this.getMirrorPoint(this._tmpV3_0,this._tmpV3_0,i,0),this._tmpV3_0.normalize(),this._tmpV3_0.negative(),_.transformQuat(this._tmpV3_1,_.UP,this.target.worldRotation),this._tmpV3_1.normalize(),this.getMirrorPoint(this._tmpV3_1,this._tmpV3_1,i,0),this._tmpV3_1.normalize(),u.fromViewUp(this._tmpQuat,this._tmpV3_0,this._tmpV3_1),this.node.worldRotation=this._tmpQuat}},n.getReflectionMatrix=function(t,i,r){var e=i.x,o=i.y,n=i.z;null==t&&(t=p());var a=t;return a.m00=1-2*e*e,a.m01=-2*o*e,a.m02=-2*o*e,a.m03=0,a.m04=-2*e*o,a.m05=1-2*o*o,a.m06=-2*n*o,a.m07=0,a.m08=-2*e*n,a.m09=-2*o*n,a.m10=1-2*n*n,a.m11=0,a.m12=-2*r*e,a.m13=-2*r*o,a.m14=-2*r*n,a.m15=1,t},i}(h)).prototype,"target",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=i(w.prototype,"plane",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=w))||g)||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/orbit-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,r,a,n,s,u,l,h,c,p,g,R,d,_,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.createClass},function(t){n=t.cclegacy,s=t._decorator,u=t.Vec3,l=t.Quat,h=t.Node,c=t.director,p=t.Canvas,g=t.systemEvent,R=t.SystemEventType,d=t.lerp,_=t.Component,f=t.Vec2}],execute:function(){var b,y,w,m,T,S,E,v,x,z,C,O,M,D,H,P,U,k,A,W,V;n._RF.push({},"6be7d8BhlpJFobtMkxMXvVa","orbit-camera",void 0);var Y=s.ccclass,j=s.property,F=s.type,L=new u,N=new u,B=new l;new u(0,0,1),t("default",(b=Y("OrbitCamera"),y=F(h),w=F(h),m=F(u),T=F(u),b((v=e((E=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,o(e,"enableTouch",v,r(e)),o(e,"enableScaleRadius",x,r(e)),o(e,"autoRotate",z,r(e)),o(e,"autoRotateSpeed",C,r(e)),o(e,"rotateSpeed",O,r(e)),o(e,"followSpeed",M,r(e)),o(e,"xRotationRange",D,r(e)),o(e,"_target",H,r(e)),o(e,"radiusScaleSpeed",P,r(e)),o(e,"minRadius",U,r(e)),o(e,"maxRadius",k,r(e)),o(e,"followTargetRotationY",A,r(e)),o(e,"_startRotation",W,r(e)),e._center=new u,e._targetCenter=new u,e._touched=!1,e._targetRotation=new u,e._rotation=new l,o(e,"_targetRadius",V,r(e)),e._radius=10,e}i(e,t);var n=e.prototype;return n.start=function(){var t=c.getScene().getComponentInChildren(p);t&&t.node?(this.enableTouch&&(t.node.on(h.EventType.TOUCH_START,this.onTouchStart,this),t.node.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),t.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this)),this.enableScaleRadius&&t.node.on(h.EventType.MOUSE_WHEEL,this.onMouseWhee,this)):(this.enableTouch&&(g.on(R.TOUCH_START,this.onTouchStart,this),g.on(R.TOUCH_MOVE,this.onTouchMove,this),g.on(R.TOUCH_END,this.onTouchEnd,this)),this.enableScaleRadius&&g.on(R.MOUSE_WHEEL,this.onMouseWhee,this)),this.resetTargetRotation(),l.fromEuler(this._rotation,this._targetRotation.x,this._targetRotation.y,this._targetRotation.z),this.target&&(this._targetCenter.set(this.target.worldPosition),this._center.set(this._targetCenter)),this._radius=this.radius,this.limitRotation()},n.resetTargetRotation=function(){var t=this._targetRotation.set(this._startRotation);this.followTargetRotationY&&(t=N.set(t),l.toEuler(L,this.target.worldRotation),t.y+=L.y)},n.onTouchStart=function(){this._touched=!0},n.onTouchMove=function(t,e){if(this._touched){var i=t.getDelta();l.fromEuler(B,this._targetRotation.x,this._targetRotation.y,this._targetRotation.z),l.rotateX(B,B,.005*-i.y),l.rotateAround(B,B,u.UP,.005*-i.x),l.toEuler(this._targetRotation,B),this.limitRotation()}},n.onTouchEnd=function(){this._touched=!1},n.onMouseWhee=function(t){var e=t.getScrollY();this._targetRadius+=this.radiusScaleSpeed*-Math.sign(e),this._targetRadius=Math.min(this.maxRadius,Math.max(this.minRadius,this._targetRadius))},n.limitRotation=function(){var t=this._targetRotation;t.x<this.xRotationRange.x?t.x=this.xRotationRange.x:t.x>this.xRotationRange.y&&(t.x=this.xRotationRange.y),t.z=0},n.update=function(t){var e=this._targetRotation;this.autoRotate&&!this._touched&&(e.y+=this.autoRotateSpeed*t),this.target&&(this._targetCenter.set(this.target.worldPosition),this.followTargetRotationY&&(e=N.set(e),l.toEuler(L,this.target.worldRotation),e.y+=L.y)),l.fromEuler(B,e.x,e.y,e.z),l.slerp(this._rotation,this._rotation,B,7*t*this.rotateSpeed),u.lerp(this._center,this._center,this._targetCenter,5*t*this.followSpeed),this._radius=d(this._radius,this._targetRadius,5*t),u.transformQuat(L,u.FORWARD,this._rotation),u.multiplyScalar(L,L,this._radius),L.add(this._center),this.node.position=L,this.node.lookAt(this._center)},a(e,[{key:"radius",get:function(){return this._targetRadius},set:function(t){this._targetRadius=t}},{key:"target",get:function(){return this._target},set:function(t){this._target=t,this._targetRotation.set(this._startRotation),this._targetCenter.set(t.worldPosition)}},{key:"targetRotation",get:function(){return this._startRotation.set(this._targetRotation),this._startRotation},set:function(t){this._targetRotation.set(t),this._startRotation.set(t)}}]),e}(_)).prototype,"enableTouch",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=e(E.prototype,"enableScaleRadius",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=e(E.prototype,"autoRotate",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=e(E.prototype,"autoRotateSpeed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),O=e(E.prototype,"rotateSpeed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=e(E.prototype,"followSpeed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=e(E.prototype,"xRotationRange",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f(5,70)}}),H=e(E.prototype,"_target",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(E.prototype,"radius",[j],Object.getOwnPropertyDescriptor(E.prototype,"radius"),E.prototype),P=e(E.prototype,"radiusScaleSpeed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),U=e(E.prototype,"minRadius",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),k=e(E.prototype,"maxRadius",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(E.prototype,"target",[w],Object.getOwnPropertyDescriptor(E.prototype,"target"),E.prototype),e(E.prototype,"targetRotation",[m],Object.getOwnPropertyDescriptor(E.prototype,"targetRotation"),E.prototype),A=e(E.prototype,"followTargetRotationY",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),W=e(E.prototype,"_startRotation",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),V=e(E.prototype,"_targetRadius",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),S=E))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Joystick.ts"],(function(e){"use strict";var t,i,r,o,n,a,l,p,s,c,y,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,l=e.RigidBodyComponent,p=e.CCFloat,s=e.Vec2,c=e.Vec3,y=e.Component},function(e){u=e.default}],execute:function(){var f,d,b,h,m,v,g,w,_,z,P;n._RF.push({},"54774cZUe5IJpwwyn4JBB1o","Player",void 0);var j=a.ccclass,B=a.property;e("default",(f=j("Player"),d=B({displayName:"摇杆脚本所在节点",tooltip:"摇杆脚本Joystick所在脚本",type:u}),b=B({displayName:"角色",tooltip:"角色",type:l}),h=B({displayName:"是否禁锢角色",tooltip:"是否禁锢角色，如果角色被禁锢，角色就动不了了"}),m=B({displayName:"角色移动速度",tooltip:"角色移动速度，不建议太大，1-10最好",type:p}),f((w=t((g=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"joy",w,o(t)),r(t,"player",_,o(t)),r(t,"is_fbd_player",z,o(t)),r(t,"speed",P,o(t)),t.vector=new s(0,0),t}return i(t,e),t.prototype.update=function(){if(0==this.is_fbd_player){this.vector=this.joy.vector;var e=this.vector.normalize(),t=e.x*this.speed,i=e.y*this.speed,r=new c(0,0,0);this.player.getLinearVelocity(r);var o=new c(t,r.y,-i);c.transformQuat(o,o,this.player.node.getRotation()),this.player.setLinearVelocity(o)}},t}(y)).prototype,"joy",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(g.prototype,"player",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(g.prototype,"is_fbd_player",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=t(g.prototype,"speed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),v=g))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/Poster_Wall.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,n,o,e,s,r,a,c,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Color,c=t.Component,h=t.Material}],execute:function(){var u,l,_,p;s._RF.push({},"8773757JIdFVaHBVSWwoEdC","Poster_Wall",void 0);var w=r.ccclass,d=r.property;t("Poster_Wall",w("Poster_Wall")((_=i((l=function(t){function i(){for(var i,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,o(i,"count_n",_,e(i)),i.wait_n=510,i.time=.4,i.do=!0,i.wait=!1,o(i,"Poster_mtl",p,e(i)),i}n(i,t);var s=i.prototype;return s.update=function(t){this.count(),this.change_o(this.count_n),console.log(this.wait_n)},s.count=function(){this.count_n<255*this.time&&1==this.do&&0==this.wait&&(this.count_n=this.count_n+1),this.count_n>=255*this.time&&1==this.do&&0==this.wait&&(this.count_n=255*this.time,this.do=!1,this.wait=!0),1==this.wait&&(this.wait_n=this.wait_n-1),this.wait_n<=0&&1==this.wait&&(this.wait_n=510,this.wait=!1),this.count_n>0&&0==this.do&&0==this.wait&&(this.count_n=this.count_n-1),this.count_n<=0&&0==this.do&&0==this.wait&&(this.count_n=0,this.do=!0,this.wait=!0)},s.change_o=function(t){this.Poster_mtl.setProperty("mainColor",new a(255,255,255,t/this.time))},i}(c)).prototype,"count_n",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=i(l.prototype,"Poster_mtl",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),u=l))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/SelfRotating.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,r,i,n,a,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.Component,c=t.v3}],execute:function(){var s,u,p;n._RF.push({},"6eced1NZatCX4yByNvD5G6V","SelfRotating",void 0);var d=a.ccclass,f=a.property;a.executeInEditMode,t("SelfRotating",d("SelfRotating")((p=e((u=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"rotationalSpeed",p,i(e)),e}o(e,t);var n=e.prototype;return n.start=function(){},n.update=function(t){var e=this.node.eulerAngles,o=(e.x+t*this.rotationalSpeed.x)%360,r=(e.y+t*this.rotationalSpeed.y)%360,i=(e.z+t*this.rotationalSpeed.z)%360;this.node.setRotationFromEuler(o,r,i)},e}(l)).prototype,"rotationalSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c(0,0,0)}}),s=u))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/setting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./grass-bender-renderer.ts","./config.ts"],(function(e){"use strict";var t,i,n,s,r,o,l,a,g,u,h,c,d,p,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Node,a=e.Toggle,g=e.Button,u=e.setDisplayStats,h=e.director,c=e.Vec2,d=e.game,p=e.Component},function(e){b=e.GrassBenderRenderer},function(e){f=e.Config}],execute:function(){var y,T,G,w,B,v,m,F,R,z,H,S,N,Q,C,D,I,k,X;r._RF.push({},"1cc41vvS9ROubh3cG3gNNZI","setting",void 0);var W,_=o.ccclass,q=(o.property,o.type);!function(e){e[e.Hard=0]="Hard",e[e.X5=1]="X5",e[e.X9=2]="X9",e[e.X25=3]="X25"}(W||(W={}));e("Settings",(y=_("Settings"),T=q(l),G=q(a),w=q(a),B=q(a),v=q(a),m=q(a),F=q(g),R=q(b),y((S=t((H=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"settings",S,s(t)),n(t,"lodToggle",N,s(t)),n(t,"debugToggle",Q,s(t)),n(t,"fpsToggle",C,s(t)),n(t,"qualityToggle",D,s(t)),n(t,"bendGrassToggle",I,s(t)),n(t,"bendGrassButton",k,s(t)),n(t,"grassBenderRenderer",X,s(t)),t}i(t,e);var r=t.prototype;return r.start=function(){this.node.on(l.EventType.TOUCH_END,this.showSettings,this),this.bendGrassToggle&&(this.bendGrassButton&&(this.bendGrassButton.interactable=f.supportBendGrass),this.bendGrassToggle.interactable=f.supportBendGrass,this.bendGrassToggle.setIsCheckedWithoutNotify(f.bendGrass)),this.lodToggle&&this.lodToggle.setIsCheckedWithoutNotify(f.lod),this.debugToggle&&this.debugToggle.setIsCheckedWithoutNotify(f.debug),this.qualityToggle&&this.qualityToggle.setIsCheckedWithoutNotify(f.highQuality),this.fpsToggle&&this.fpsToggle.setIsCheckedWithoutNotify(f.highFps),u(f.debug),this.setHighQuality(f.highQuality),this.setHighFps(f.highFps),this.grassBenderRenderer&&(this.grassBenderRenderer.node.active=f.bendGrass)},r.showSettings=function(){this.settings&&(this.settings.active=!this.settings.active)},r.toggleLod=function(){f.lod=!f.lod},r.toggleDebug=function(){f.debug=!f.debug,u(f.debug)},r.toggleQuality=function(){f.highQuality=!f.highQuality,this.setHighQuality(f.highQuality)},r.toggleHighFps=function(){f.highFps=!f.highFps,this.setHighFps(f.highFps)},r.toggleBendGrass=function(){f.bendGrass=!f.bendGrass,this.grassBenderRenderer&&(this.grassBenderRenderer.node.active=f.bendGrass)},r.setHighQuality=function(e){var t=h.getScene().globals;t.shadows.shadowMapSize=e?new c(4096,4096):new c(512,512),this.scheduleOnce((function(){h.root.pipeline.pipelineSceneData.shadows.shadowMapDirty=!1}))},r.setHighFps=function(e){e?d.setFrameRate(60):d.setFrameRate(30)},t}(p)).prototype,"settings",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(H.prototype,"lodToggle",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(H.prototype,"debugToggle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(H.prototype,"fpsToggle",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(H.prototype,"qualityToggle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(H.prototype,"bendGrassToggle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(H.prototype,"bendGrassButton",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(H.prototype,"grassBenderRenderer",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=H))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/SettingsUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PEFX_Bloom.ts","./PEFX_Distortion.ts","./PEFX_Glow.ts","./PEFX_Lut.ts","./PostEFXMgr.ts"],(function(t){"use strict";var e,n,i,o,l,s,a,r,u,c,d,h,g,v,f,E,b,p,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,l=t.createClass},function(t){s=t.cclegacy,a=t._decorator,r=t.Node,u=t.ToggleComponent,c=t.Toggle,d=t.EventHandler,h=t.Component,g=t.Slider,v=t.Label},function(t){f=t.PEFX_Bloom},function(t){E=t.PEFX_Distortion},function(t){b=t.PEFX_Glow},function(t){p=t.PEFX_Lut},function(t){m=t.PostEFXMgr}],execute:function(){var y,C,_,T,R,w,N,x,S,B,I,k,F,M,P,X,A;s._RF.push({},"cc353vKWFFDeIQDwb3jtzQs","SettingsUI",void 0);var D=a.ccclass,L=a.property,z=function(){function t(t,e){this._slider=null,this._maxValue=1;var n=t.getComponent(g);this._slider=n,this._valueText=n.node.getChildByName("value").getComponent(v),this._maxValue=e}return t.prototype.refreshText=function(){this._valueText.string=this.value.toFixed(2)},l(t,[{key:"slider",get:function(){return this._slider}},{key:"value",get:function(){return this._slider.progress*this._maxValue},set:function(t){this._valueText.string=t.toFixed(2),this._slider.progress=t/this._maxValue}}]),t}();t("SettingsUI",(y=D("SettingsUI"),C=L({type:r}),_=L({type:r}),T=L({type:r}),R=L({type:r}),w=L({type:r}),N=L({type:r}),x=L({type:r}),y((I=e((B=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return e=t.call.apply(t,[this].concat(l))||this,i(e,"btnClose",I,o(e)),i(e,"btnOpen",k,o(e)),i(e,"panel",F,o(e)),i(e,"glowRoot",M,o(e)),i(e,"distortionRoot",P,o(e)),i(e,"bloomRoot",X,o(e)),i(e,"lutRoot",A,o(e)),e.hasInited=!1,e._callbackIdBase=0,e._callbackMap={},e}n(e,t);var l=e.prototype;return l.onPanelOpen=function(){this.panel.active=!0,this.btnOpen.active=!1,this.btnClose.active=!0,this.hasInited||(this.initGlowCtrls(),this.initDistortionCtrls(),this.initBloomCtrls(),this.initLUTCtrls(),this.hasInited=!0)},l.onPanelClose=function(){this.panel.active=!1,this.btnOpen.active=!0,this.btnClose.active=!1},l.start=function(){this.panel.active=!1,this.btnOpen.active=!0,this.btnClose.active=!1},l.initGlowCtrls=function(){var t=this.glowRoot.getChildByName("Toggle").getComponent(u);t.isChecked=m.inst.getEfxEnable(b.NAME);var e=m.inst.getPEFX(b.NAME),n=new z(this.glowRoot.getChildByName("Slider_BlurRadius"),6),i=new z(this.glowRoot.getChildByName("Slider_BlendIntensity"),10);this.addToggleEvent(t,(function(t){m.inst.setEfxEnable(b.NAME,t.isChecked)})),this.addSlideEvent(n.slider,(function(t){e.blurRadius=n.value,n.refreshText()})),this.addSlideEvent(i.slider,(function(t){e.blendIntensity=i.value,i.refreshText()})),n.value=e.blurRadius,i.value=e.blendIntensity},l.initDistortionCtrls=function(){var t=this.distortionRoot.getChildByName("Toggle").getComponent(u);t.isChecked=m.inst.getEfxEnable(E.NAME);var e=m.inst.getPEFX(E.NAME),n=new z(this.distortionRoot.getChildByName("Slider_Intensity"),2);this.addToggleEvent(t,(function(t){m.inst.setEfxEnable(E.NAME,t.isChecked)})),this.addSlideEvent(n.slider,(function(t){e.intensity=n.value,n.refreshText()})),n.value=e.intensity},l.initBloomCtrls=function(){var t=this.bloomRoot.getChildByName("Toggle").getComponent(u);t.isChecked=m.inst.getEfxEnable(f.NAME);var e=m.inst.getPEFX(f.NAME),n=new z(this.bloomRoot.getChildByName("Slider_BlurRadius"),6),i=new z(this.bloomRoot.getChildByName("Slider_LuminanceThreshold"),1),o=new z(this.bloomRoot.getChildByName("Slider_Intensity"),5),l=new z(this.bloomRoot.getChildByName("Slider_BlendIntensity"),10);this.addToggleEvent(t,(function(t){m.inst.setEfxEnable(f.NAME,t.isChecked)})),this.addSlideEvent(n.slider,(function(t){e.blurRadius=n.value,n.refreshText()})),this.addSlideEvent(i.slider,(function(t){e.luminanceThreshold=i.value,i.refreshText()})),this.addSlideEvent(o.slider,(function(t){e.intensity=o.value,o.refreshText()})),this.addSlideEvent(l.slider,(function(t){e.blendIntensity=l.value,l.refreshText()})),i.value=e.luminanceThreshold,o.value=e.intensity,n.value=e.blurRadius,l.value=e.blendIntensity},l.initLUTCtrls=function(){var t=this.lutRoot.getChildByName("Toggle").getComponent(u);t.isChecked=m.inst.getEfxEnable(p.NAME),this.addToggleEvent(t,(function(t){m.inst.setEfxEnable(p.NAME,t.isChecked);var e=m.inst.getPEFX(p.NAME);e.getLut()<0&&e.setLut(0)}));for(var e=this.lutRoot.getChildByName("lutSelector"),n=0;n<e.children.length;++n)this.addToggleEvent(e.children[n].getComponent(c),(function(t,e){m.inst.getPEFX(p.NAME).setLut(e)}),n)},l.addToggleEvent=function(t,e,n){var i=new d;i.component="SettingsUI",i.target=this.node,i.handler="onToggleEvent",i.customEventData="toggle_"+this._callbackIdBase++;var o=t.checkEvents;o.push(i),t.checkEvents=o,this._callbackMap[i.customEventData]={cb:e,arg:n}},l.onToggleEvent=function(t,e){var n=this._callbackMap[e];n&&n.cb(t,n.arg)},l.addSlideEvent=function(t,e,n){var i=new d;i.component="SettingsUI",i.target=this.node,i.handler="onSlideEvent",i.customEventData="slide_"+this._callbackIdBase++;var o=t.slideEvents;o.push(i),t.slideEvents=o,this._callbackMap[i.customEventData]={cb:e,arg:n}},l.onSlideEvent=function(t,e){var n=this._callbackMap[e];n&&n.cb(t,n.arg)},e}(h)).prototype,"btnClose",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(B.prototype,"btnOpen",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(B.prototype,"panel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(B.prototype,"glowRoot",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(B.prototype,"distortionRoot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(B.prototype,"bloomRoot",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(B.prototype,"lutRoot",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=B))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/spline-curve.ts",["cc","./curve.ts"],(function(t){"use strict";var n,e,i;return{setters:[function(t){n=t.cclegacy,e=t.Vec3},function(t){i=t.Curve}],execute:function(){n._RF.push({},"51c91BvLCFLVoMnF5aWZDsn","spline-curve",void 0);t("default",function(){function t(t){this.points=[],this.points=null==t?[]:t}return t.prototype.getPoint=function(t){var n=this.points,r=(n.length-1)*t,o=Math.floor(r),u=r-o,c=n[0==o?o:o-1],s=n[o],l=n[o>n.length-2?n.length-1:o+1],p=n[o>n.length-3?n.length-1:o+2],h=new e(0,0,0);return h.x=i.interpolate(c.x,s.x,l.x,p.x,u),h.y=i.interpolate(c.y,s.y,l.y,p.y,u),h.z=i.interpolate(c.z,s.z,l.z,p.z,u),h},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/spline-mrg.ts",["cc","./catmull-rom-curve.ts","./spline-curve.ts"],(function(e){"use strict";var r,t,n,o;return{setters:[function(e){r=e.cclegacy,t=e._decorator},function(e){n=e.CatmullRomCurve},function(e){o=e.default}],execute:function(){var u;r._RF.push({},"d1a1djkVT1Ch6/nEnoQRyOK","spline-mrg",void 0);var c=t.ccclass;t.property,e("SplineMrg",c("SplineMrg")(u=function(){function e(){}return e.curve=function(e,r){for(var t=[],n=new o(e),u=0;u<r;u++){var c=n.getPoint(u/r);c.x=Math.floor(1e3*c.x)/1e3,c.y=Math.floor(1e3*c.y)/1e3,c.z=Math.floor(1e3*c.z)/1e3,t.push(c)}return t},e.catmullRomCurve=function(e,r){var t=[],o=new n(e);o.type="chordal",o.tension=0;for(var u=0;u<r;u++){var c=o.getPoint(u/r);c.x=Math.floor(1e3*c.x)/1e3,c.y=Math.floor(1e3*c.y)/1e3,c.z=Math.floor(1e3*c.z)/1e3,t.push(c)}return t},e}())||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/TestApp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PEFX_Bloom.ts","./PEFX_Distortion.ts","./PEFX_Final.ts","./PEFX_Glow.ts","./PEFX_GrabScene.ts","./PEFX_Lut.ts","./PostEFXMgr.ts"],(function(t){"use strict";var n,e,s,i,o,r,u,c,a,E,l,p,F;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,i=t.find,o=t.Camera,r=t.Component},function(t){u=t.PEFX_Bloom},function(t){c=t.PEFX_Distortion},function(t){a=t.PEFX_Final},function(t){E=t.PEFX_Glow},function(t){l=t.PEFX_GrabScene},function(t){p=t.PEFX_Lut},function(t){F=t.PostEFXMgr}],execute:function(){var f;e._RF.push({},"17fd3Tr3U1D2bFO4kFwxnSL","TestApp",void 0);var P=s.ccclass;s.property,t("TestApp",P("TestApp")(f=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){var t=i("Main Camera").getComponent(o),n=[l,E,c,u,p,a];F.inst.setup(n,t,(function(){F.inst.setEfxEnable(E.NAME,!0),F.inst.setEfxEnable(E.NAME,!0);var t=F.inst.getPEFX(E.NAME);t.blurRadius=4.5,t.blendIntensity=1.5,F.inst.setEfxEnable(u.NAME,!0);var n=F.inst.getPEFX(u.NAME);n.luminanceThreshold=.05,n.intensity=1.5,n.blurRadius=4.5,n.blendIntensity=2}))},e}(r))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/ThirdPersonCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,r,a,h,c,u,_,p,l,T,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Node,h=t.v2,c=t.v3,u=t.Camera,_=t.input,p=t.Input,l=t.KeyCode,T=t.Vec3,d=t.Component}],execute:function(){var y,f,m,E,C,O;s._RF.push({},"78fbaYmXk5OLp1dz1v3xq57","ThirdPersonCamera",void 0);var v=r.ccclass,g=r.property;t("ThirdPersonCamera",(y=v("ThirdPersonCamera"),f=g({type:a}),y((C=e((E=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"target",C,n(e)),i(e,"lookAtOffset",O,n(e)),e._isTouching=!1,e._camera=null,e._cameraZoom=0,e._rotationY=0,e._delta=h(),e._tmpV3=c(),e}o(e,t);var s=e.prototype;return s.start=function(){this._camera=this.node.children[0].getComponent(u),_.on(p.EventType.TOUCH_START,this.onTouchStart,this),_.on(p.EventType.TOUCH_END,this.onTouchEnd,this),_.on(p.EventType.TOUCH_CANCEL,this.onTouchEnd,this),_.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),_.on(p.EventType.KEY_DOWN,this.onKeyDown,this),_.on(p.EventType.KEY_UP,this.onKeyUp,this)},s.onDestroy=function(){_.off(p.EventType.TOUCH_START,this.onTouchStart,this),_.off(p.EventType.TOUCH_END,this.onTouchEnd,this),_.off(p.EventType.TOUCH_CANCEL,this.onTouchEnd,this),_.off(p.EventType.TOUCH_MOVE,this.onTouchMove,this),_.off(p.EventType.KEY_DOWN,this.onKeyDown,this),_.off(p.EventType.KEY_UP,this.onKeyUp,this)},s.onKeyDown=function(t){t.keyCode==l.ARROW_UP?this._cameraZoom=-1:t.keyCode==l.ARROW_DOWN?this._cameraZoom=1:t.keyCode==l.ARROW_LEFT?this._rotationY=-1:t.keyCode==l.ARROW_RIGHT&&(this._rotationY=1),this._cameraZoom*=3,this._rotationY*=10},s.onKeyUp=function(t){t.keyCode==l.ARROW_UP||t.keyCode==l.ARROW_DOWN?this._cameraZoom=0:(t.keyCode==l.ARROW_LEFT||t.keyCode==l.ARROW_RIGHT)&&(this._rotationY=0)},s.onTouchStart=function(t){this._isTouching=!0,console.log(t.getTouches().length)},s.onTouchEnd=function(t){this._isTouching=!1},s.onTouchMove=function(t){t.touch.getDelta(this._delta)},s.update=function(t){if(this.target&&this.target.isValid){this.target.parent!=this.node.parent&&(this.node.parent=this.target.parent),this.target.getPosition(this._tmpV3),T.add(this._tmpV3,this._tmpV3,this.lookAtOffset),this.node.setPosition(this._tmpV3);var e=this.node.eulerAngles;this._isTouching&&(this.node.setRotationFromEuler(e.x+this._delta.y,e.y-this._delta.x,e.z),this._delta.set(0,0)),this._cameraZoom&&(this._tmpV3.set(0,0,this._cameraZoom*t),this._camera.node.translate(this._tmpV3,a.NodeSpace.LOCAL)),this.node.setRotationFromEuler(e.x,e.y-this._rotationY*t,e.z)}else this.target=null},e}(d)).prototype,"target",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(E.prototype,"lookAtOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c()}}),m=E))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/ThirdPersonController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ThirdPersonCamera.ts"],(function(t){"use strict";var i,o,n,r,e,s,a,h,_,d,c,f,l,u,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){e=t.cclegacy,s=t._decorator,a=t.v3,h=t.SkeletalAnimation,_=t.input,d=t.Input,c=t.KeyCode,f=t.Vec3,l=t.Node,u=t.Component},function(t){p=t.ThirdPersonCamera}],execute:function(){var y,E,w,T,v;e._RF.push({},"ddbabDcRWxMPYl5RkpeuI7N","ThirdPersonController",void 0);var K=s.ccclass,Y=s.property;t("ThirdPersonController",(y=K("ThirdPersonController"),E=Y({type:p}),y((v=i((T=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return i=t.call.apply(t,[this].concat(e))||this,n(i,"tpCamera",v,r(i)),i._isMoving=!1,i._animation=null,i._keydownList=[],i._forward=a(),i._right=a(),i}o(i,t);var e=i.prototype;return e.start=function(){this._animation=this.node.getComponent(h),_.on(d.EventType.TOUCH_START,this.onTouchStart,this),_.on(d.EventType.TOUCH_END,this.onTouchEnd,this),_.on(d.EventType.TOUCH_CANCEL,this.onTouchEnd,this),_.on(d.EventType.KEY_DOWN,this.onKeyDown,this),_.on(d.EventType.KEY_UP,this.onKeyUp,this)},e.onDestroy=function(){_.off(d.EventType.TOUCH_START,this.onTouchStart,this),_.off(d.EventType.TOUCH_END,this.onTouchEnd,this),_.off(d.EventType.TOUCH_CANCEL,this.onTouchEnd,this),_.off(d.EventType.KEY_DOWN,this.onKeyDown,this),_.off(d.EventType.KEY_UP,this.onKeyUp,this)},e.onKeyDown=function(t){var i=t.keyCode;i!=c.KEY_W&&i!=c.KEY_A&&i!=c.KEY_S&&i!=c.KEY_D||-1==this._keydownList.indexOf(i)&&this._keydownList.push(i)},e.onKeyUp=function(t){var i=t.keyCode;if(i==c.KEY_W||i==c.KEY_A||i==c.KEY_S||i==c.KEY_D){var o=this._keydownList.indexOf(i);-1!=o&&this._keydownList.splice(o,1)}},e.onTouchStart=function(t){},e.onTouchEnd=function(t){},e.onStartMove=function(){this._animation.crossFade("cocos_anim_walk",.5)},e.onStop=function(){this._animation.crossFade("cocos_anim_idle",.5)},e.updateMoveDir=function(){var t=this._keydownList.length;if(0!=t){var i=this._keydownList[t-1],o=this._keydownList[t-2],n=0,r=0;i==c.KEY_W?(n=1,o==c.KEY_A?r=-1:o==c.KEY_D&&(r=1)):i==c.KEY_A?(r=-1,o==c.KEY_W?n=1:o==c.KEY_S&&(n=-1)):i==c.KEY_S?(n=-1,o==c.KEY_A?r=-1:o==c.KEY_D&&(r=1)):i==c.KEY_D&&(r=1,o==c.KEY_W?n=1:o==c.KEY_S&&(n=-1)),this._forward.set(this.tpCamera.node.forward),this._forward.y=0,this._forward.normalize(),f.cross(this._right,this._forward,f.UNIT_Y),f.multiplyScalar(this._forward,this._forward,n),f.multiplyScalar(this._right,this._right,r),this._forward.normalize(),this._right.normalize(),f.add(this._forward,this._forward,this._right),this._forward.normalize()}},e.update=function(t){0==this._isMoving&&this._keydownList.length?(this._isMoving=!0,this.onStartMove()):1==this._isMoving&&0==this._keydownList.length&&(this._isMoving=!1,this.onStop()),this._isMoving&&(this.updateMoveDir(),f.multiplyScalar(this._forward,this._forward,5*t),this.node.translate(this._forward,l.NodeSpace.WORLD),this._forward.x=-this._forward.x,this._forward.z=-this._forward.z,this._forward.normalize(),this.node.forward=this._forward)},i}(u)).prototype,"tpCamera",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=T))||w));e._RF.pop()}}}));

System.register("chunks:///_virtual/UI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts"],(function(e){"use strict";var t,i,r,n,a,l,o,p,u,c,s,y,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Node,p=e.CCFloat,u=e.SystemEventType,c=e.Vec3,s=e.Component,y=e.Vec2},function(e){m=e.default}],execute:function(){var f,b,d,g,h,_,j,w,v,z,N,L,P,V,x,D,I;a._RF.push({},"34d68wcaKNDL7wF2jPdpVjL","UI",void 0);var U=l.ccclass,C=l.property;e("UI",(f=U("UI"),b=C({displayName:"Player脚本所在节点",tooltip:"Player脚本所在节点",type:m}),d=C({displayName:"移动视角事件目标节点",tooltip:"代码将把移动视角的事件绑定到这个节点上，推荐把这个节点的宽高设置成和canvas一样，并给四个方向加上widget",type:o}),g=C({displayName:"相机",tooltip:"相机",type:o}),h=C({displayName:"相机移动速度",tooltip:"相机移动速度",type:p}),_=C({displayName:"跳跃的高度",tooltip:"跳跃的高度，代码会根据这个值设置角色刚体的Y线性速度",type:p}),j=C({displayName:"跳跃按钮禁用时间",tooltip:"按一次跳跃按钮禁用多长时间，单位是秒",type:p}),w=C({displayName:"相机上下移动限制",tooltip:"限制相机X旋转，X是向上移动限制的角度，Y是向下移动限制的角度"}),f((N=t((z=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,r(t,"player",N,n(t)),r(t,"target",L,n(t)),r(t,"camera",P,n(t)),r(t,"angle_speed",V,n(t)),r(t,"jump_height",x,n(t)),r(t,"jump_btn_time",D,n(t)),r(t,"cam_att",I,n(t)),t.is_jump=!0,t}i(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;this.target.on(u.TOUCH_MOVE,(function(t){var i=t.getDelta();(i.x<0||i.x>0)&&(e.player.node.eulerAngles=e.player.node.eulerAngles.add3f(0,-i.x*e.angle_speed,0))}),this)},a.onbtn_jump=function(){if(1==this.is_jump){var e=new c(0,0,0);this.player.player.getLinearVelocity(e),this.player.player.setLinearVelocity(new c(e.x,this.jump_height,e.z));var t=this;this.is_jump=!1,this.scheduleOnce((function(){t.is_jump=!0}),this.jump_btn_time)}},t}(s)).prototype,"player",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(z.prototype,"target",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(z.prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(z.prototype,"angle_speed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),x=t(z.prototype,"jump_height",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),D=t(z.prototype,"jump_btn_time",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),I=t(z.prototype,"cam_att",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(-25,-50)}}),v=z))||v));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});