System.register("chunks:///_virtual/DepthObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Layer3D.ts","./PEFX_Basic.ts","./PEFX_Depth.ts"],(function(t){"use strict";var o,e,i,n,s,c,r,p,h,a;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,n=t.instantiate,s=t.director,c=t.MeshRenderer,r=t.Component},function(t){p=t.Layer3D},function(t){h=t.PEFXResources},function(t){a=t.PEFX_Depth}],execute:function(){var u;e._RF.push({},"79412AAgwdD6772PYWGHwXA","DepthObject",void 0);var l=i.ccclass;i.property,t("DepthObject",l("DepthObject")(u=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.start=function(){},i.onEnable=function(){this._copyObj&&(this._copyObj.active=!0)},i.onDestroy=function(){this._copyObj&&(this._copyObj.destroy(),this._copyObj=null)},i.update=function(){if(this.isValid&&null==this._copyObj){var t=h.getRes(a.matDepthPath);t&&(this._copyObj=n(this.node),this._copyObj._removeComponent(this._copyObj.getComponent(e)),s.getScene().addChild(this._copyObj),this._copyObj.layer=p.DEPTH.mask,this._copyObj.getComponent(c).material=t)}this._copyObj&&(this._copyObj.worldPosition=this.node.worldPosition,this._copyObj.worldRotation=this.node.worldRotation,this._copyObj.worldScale=this.node.worldScale)},e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/DistortionObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Layer3D.ts"],(function(e){"use strict";var t,r,i,n,o,s,c,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,c=e.CCBoolean,a=e.Component},function(e){l=e.Layer3D}],execute:function(){var u,p,y,h,f;o._RF.push({},"e2d6bMW4ppEj54p+8O5YRDz","DistortionObject",void 0);var d=s.ccclass,v=s.property;e("DistortionObject",(u=d("DistortionObject"),p=v(c),u((f=t((h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"allChildren",f,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){this.setLayerRecursively(this.node)},o.setLayerRecursively=function(e){if(e.layer=l.DISTORTION.mask,this.allChildren)for(var t=0;t<e.children.length;++t)this.setLayerRecursively(e.children[t])},t}(a)).prototype,"allChildren",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=h))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalUniformMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var n,l,e;return{setters:[function(o){n=o.createClass},function(o){l=o.cclegacy,e=o.director}],execute:function(){l._RF.push({},"6181aag8slKP6lFEghpLEjZ","GlobalUniformMgr",void 0),o("GlobalUniformMgr",function(){function o(){this._globalUniformMap={};var o=e.root.pipeline.pipelineUBO,n=o._globalUBO,l=o._cameraUBO;this._globalUniformMap["cc_time.w"]={ubo:n,offset:3};this._globalUniformMap["cc_fogBase.w"]={ubo:l,offset:131};this._globalUniformMap["cc_fogAdd.w"]={ubo:l,offset:135};this._globalUniformMap["cc_nearFar.z"]={ubo:l,offset:138},this._globalUniformMap["cc_nearFar.w"]={ubo:l,offset:139}}var l=o.prototype;return l.resetAll=function(){for(var o=Object.keys(this._globalUniformMap),n=0;n<o.length;++n){var l=o[n],e=this._globalUniformMap[l];e.ubo[e.offset]=0}},l.setGlobalUniform=function(o,n){var l=this._globalUniformMap[o];null==l&&(console.log("can not find the global uniform info by given name:"+o),console.log("please use one of "+Object.keys(this._globalUniformMap).join(","))),l.ubo[l.offset]=n},l.getGlobalUniform=function(o){var n=this._globalUniformMap[o];return null==n&&(console.log("can not find the global uniform info by given name:"+o),console.log("please use one of "+Object.keys(this._globalUniformMap).join(","))),n.ubo[n.offset]||0},n(o,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new o),this._inst}}]),o}())._inst=null,l._RF.pop()}}}));

System.register("chunks:///_virtual/GlowObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Layer3D.ts"],(function(e){"use strict";var t,r,i,n,l,o,c,a,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,c=e.CCBoolean,a=e.Component},function(e){s=e.Layer3D}],execute:function(){var u,p,h,y,f;l._RF.push({},"c7786wPFCNMuLKZFtpn1zhZ","GlowObject",void 0);var d=o.ccclass,v=o.property;e("GlowObject",(u=d("GlowObject"),p=v(c),u((f=t((y=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,i(t,"allChildren",f,n(t)),t}r(t,e);var l=t.prototype;return l.start=function(){this.setLayerRecursively(this.node)},l.setLayerRecursively=function(e){if(e.layer=s.GLOW.mask,this.allChildren)for(var t=0;t<e.children.length;++t)this.setLayerRecursively(e.children[t])},t}(a)).prototype,"allChildren",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=y))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/Layer3D.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"30c481qdWpO15uc9HPK/3dp","Layer3D",void 0);var E=e("Layer3DItem",function(){function e(e,n){this._name="",this._value=e,r[e]=this}return n(e,[{key:"value",get:function(){return this._value}},{key:"mask",get:function(){return 1<<this._value}},{key:"name",get:function(){return this._name}}]),e}()),r=e("Layer3D",function(){function e(){}return e.canBeUsed=function(e){if(e<0||e>31)return!1;for(var n=Object.keys(this),t=0;t<n.length;++t){if(this[n[t]].value==e)return!1}return!0},e.get=function(e,n){var t=n||"LAYER_"+e,r=this[t];return r||(r=this[t]=new E(e,t)),r},e}());r.USABLE=new E(16,"USABLE"),r.DEPTH=new E(17,"DEPTH"),r.GLOW=new E(18,"GLOW"),r.DISTORTION=new E(19,"DISTORTION"),r.IGNORE_RAYCAST=new E(20,"IGNORE_RAYCAST"),r.GIZMOS=new E(21,"GIZMOS"),r.EDITOR=new E(22,"EDITOR"),r.UI_3D=new E(23,"UI_3D"),r.SCENE_GIZMO=new E(24,"SCENE_GIZMO"),r.UI_2D=new E(25,"UI_2D"),r.BUILTIN_RESERVED_26=new E(26,"BUILTIN_RESERVED_26"),r.BUILTIN_RESERVED_27=new E(27,"BUILTIN_RESERVED_27"),r.PROFILTER=new E(28,"PROFILTER"),r.BUILTIN_RESERVED_29=new E(29,"BUILTIN_RESERVED_29"),r.DEFAULT=new E(30,"DEFAULT"),r.BUILTIN_RESERVED_31=new E(31,"BUILTIN_RESERVED_31"),t._RF.pop()}}}));

System.register("chunks:///_virtual/PEFX_Basic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RenderTextureUsage.ts","./RTAsSampler.ts"],(function(e){"use strict";var s,t,n,a,r,i,u,o;return{setters:[function(e){s=e.createClass},function(e){t=e.cclegacy,n=e.Node,a=e.Camera,r=e.MeshRenderer,i=e.utils},function(e){u=e.RenderTextureUsage},function(e){o=e.RTAsSampler}],execute:function(){t._RF.push({},"ea440RONdNJZLJ7G7wz6r1z","PEFX_Basic",void 0);var d=e("PEFXPass",(function(){})),c=e("PEFXResources",function(){function e(){}return e.setResMap=function(e){this._resMap=e},e.getRes=function(e){return this._resMap[e]},s(e,null,[{key:"quadMesh",get:function(){if(!this._quadMesh){this._quadMesh=i.createMesh({positions:[-1,1,0,-1,-1,0,1,-1,0,1,1,0],uvs:[0,0,0,1,1,1,1,0],indices:[0,1,2,0,2,3]})}return this._quadMesh}}]),e}());c.ROOT_PATH="kylins_post_effects/",c.TEXTURE_PATH=c.ROOT_PATH+"textures/",c.MATERIAL_PATH=c.ROOT_PATH+"materials/",c._resMap=new Map,c._quadMesh=null;e("PEFX_Base",function(){function e(e){this._passes=[],this._passMap=new Map,this._node=null,this._name=e}var t=e.prototype;return t.getPassByIndex=function(e){return this._passes[e]},t.getPass=function(e){if("number"==typeof e)return this._passes[e];var s=e;return this._passMap[s]},t.setPassProperty=function(e,s,t){var n=this.getPass(e);n&&n.quad.sharedMaterial.setProperty(s,t)},t.getPassProperty=function(e,s){var t=this.getPass(e);if(t)return t.quad.sharedMaterial.getProperty(s)},t.addPass=function(e,s,t,i,h,p){var _=new d;_.node=new n(s),e.addChild(_.node),this._passes.push(_),this._passMap[s]=_;var f=null;if(p&&(f=_.node.addComponent(a)),t){var l=new n;_.quad=l.addComponent(r),_.quad.mesh=c.quadMesh;var P=c.getRes(t);_.quad.setMaterial(P,0),_.node.addChild(l)}if(i&&(_.rta=_.node.addComponent(o),_.rta.model=_.quad),h){var M=_.node.addComponent(u);M.widthScale=1,M.heightScale=1,M.camera=f,_.rtu=M}return _},s(e,[{key:"name",get:function(){return this._name}},{key:"passes",get:function(){return this._passes}},{key:"active",get:function(){return this._node.active},set:function(e){this._node.active=e}}]),e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/PEFX_Bloom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PEFX_Basic.ts"],(function(t){"use strict";var e,r,a,s,i,n;return{setters:[function(t){e=t.inheritsLoose,r=t.createClass},function(t){a=t.cclegacy,s=t.Material},function(t){i=t.PEFXResources,n=t.PEFX_Base}],execute:function(){a._RF.push({},"d9ab9yCEh9HippofV3GNAdg","PEFX_Bloom",void 0),t("PEFX_Bloom",function(t){function a(){var e;return(e=t.call(this,a.NAME)||this).matLuminancePath=i.MATERIAL_PATH+"post-material-bloom-luminance",e.matBlurXPath=i.MATERIAL_PATH+"post-material-bloom-blur-x",e.matBlurYPath=i.MATERIAL_PATH+"post-material-bloom-blur-y",e.matCombinePath=i.MATERIAL_PATH+"post-material-bloom-combine",e}e(a,t);var n=a.prototype;return n.getRes=function(){return[{type:s,url:this.matLuminancePath},{type:s,url:this.matBlurXPath},{type:s,url:this.matBlurYPath},{type:s,url:this.matCombinePath}]},n.setupPasses=function(t){var e=t,r=this.addPass(e,"luminance",this.matLuminancePath,!0,!0,!0);r.rta.samplerMap=["prev_rt:mainTexture"],r.rtu.renderTextureUsage="bloom_rt",r.rtu.widthScale=r.rtu.heightScale=.25;var a=this.addPass(e,"blur_x",this.matBlurXPath,!0,!0,!0);a.rta.samplerMap=["bloom_rt:mainTexture"],a.rtu.renderTextureUsage="bloom_rt1",a.rtu.widthScale=a.rtu.heightScale=.25;var s=this.addPass(e,"blur_y",this.matBlurYPath,!0,!0,!0);s.rta.samplerMap=["bloom_rt1:mainTexture"],s.rtu.renderTextureUsage="bloom_rt2",s.rtu.widthScale=s.rtu.heightScale=.25;var i=this.addPass(e,"combine",this.matCombinePath,!0,!0,!0);i.rta.samplerMap=["prev_rt:mainTexture","bloom_rt2:bluredTexture"],i.rtu.renderTextureUsage="bloom_final_rt",this.luminanceThreshold=.4,this.intensity=1.5,this.blurRadius=4.5,this.blendIntensity=1},r(a,[{key:"luminanceThreshold",get:function(){return this.getPassProperty("luminance","luminanceThreshold")},set:function(t){this.setPassProperty("luminance","luminanceThreshold",t)}},{key:"intensity",get:function(){return this.getPassProperty("luminance","intensity")},set:function(t){this.setPassProperty("luminance","intensity",t)}},{key:"blurRadius",get:function(){return this.getPassProperty("blur_x","blurRadius")},set:function(t){this.setPassProperty("blur_x","blurRadius",t),this.setPassProperty("blur_y","blurRadius",t)}},{key:"blendIntensity",get:function(){return this.getPassProperty("combine","blendFactor")},set:function(t){this.setPassProperty("combine","blendFactor",t)}}]),a}(n)).NAME="bloom",a._RF.pop()}}}));

System.register("chunks:///_virtual/PEFX_Depth.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Layer3D.ts","./SyncWidthMainCamera.ts","./PEFX_Basic.ts","./RTMgr.ts"],(function(t){"use strict";var e,r,a,n,s,i,o,u,c,h,p,l;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,a=t.Material,n=t.RenderTexture,s=t.gfx,i=t.Camera,o=t.color},function(t){u=t.Layer3D},function(t){c=t.SyncWidthMainCamera},function(t){h=t.PEFXResources,p=t.PEFX_Base},function(t){l=t.RTMgr}],execute:function(){r._RF.push({},"c62d2fXPC9BqraYYcaOwi7d","PEFX_Depth",void 0);var d=t("PEFX_Depth",function(t){function r(){var e;return(e=t.call(this,r.NAME)||this).rtDepthPath=h.TEXTURE_PATH+"RT_Depth",e}e(r,t);var p=r.prototype;return p.getRes=function(){return[{type:a,url:r.matDepthPath},{type:n,url:this.rtDepthPath}]},p.setupPasses=function(t){var e=t,r=h.getRes(this.rtDepthPath);l.inst.addRenderTexture("depth_rt",r,1,1,!1,s.Format.RGBA8,s.Format.DEPTH_STENCIL);var a=this.addPass(e,"grab",null,!1,!0,!0);a.node.layer=u.DEPTH.mask;var n=a.node.getComponent(i);n.visibility=u.DEPTH.mask,n.clearColor=o(255,255,255,255),n.clearFlags=s.ClearFlagBit.ALL,a.rtu.renderTextureUsage="depth_rt",a.node.addComponent(c)},r}(p));d.NAME="depth",d.matDepthPath=h.MATERIAL_PATH+"material-depth",r._RF.pop()}}}));

System.register("chunks:///_virtual/PEFX_Distortion.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Layer3D.ts","./SyncWidthMainCamera.ts","./PEFX_Basic.ts"],(function(t){"use strict";var e,i,r,n,s,o,a,u,c,l,d;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){r=t.cclegacy,n=t.Material,s=t.Camera,o=t.color,a=t.gfx},function(t){u=t.Layer3D},function(t){c=t.SyncWidthMainCamera},function(t){l=t.PEFXResources,d=t.PEFX_Base}],execute:function(){r._RF.push({},"66327GZHoJPHKCKx5z5w7MM","PEFX_Distortion",void 0),t("PEFX_Distortion",function(t){function r(){var e;return(e=t.call(this,r.NAME)||this).matDistortionYPath=l.MATERIAL_PATH+"post-material-distortion",e}e(r,t);var d=r.prototype;return d.getRes=function(){return[{type:n,url:this.matDistortionYPath}]},d.setupPasses=function(t){var e=t,i=this.addPass(e,"grab",null,!1,!0,!0);i.node.layer=u.DISTORTION.mask;var r=i.node.getComponent(s);r.visibility=u.DISTORTION.mask,r.clearColor=o(0,0,0,0),r.clearFlags=a.ClearFlagBit.ALL,i.rtu.renderTextureUsage="distortion_rt",i.node.addComponent(c);var n=this.addPass(e,"combine",this.matDistortionYPath,!0,!0,!0);n.rta.samplerMap=["prev_rt:mainTexture","distortion_rt:effectTexture"],n.rtu.renderTextureUsage="full_screen_distorted",this.intensity=.15},i(r,[{key:"intensity",get:function(){return this.getPassProperty("combine","intensity")},set:function(t){this.setPassProperty("combine","intensity",t)}}]),r}(d)).NAME="distortion",r._RF.pop()}}}));

System.register("chunks:///_virtual/PEFX_Final.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PEFX_Basic.ts"],(function(t){"use strict";var e,a,i,s,n;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,i=t.Material},function(t){s=t.PEFXResources,n=t.PEFX_Base}],execute:function(){a._RF.push({},"3bbe95M55xLIKfomzKyce3b","PEFX_Final",void 0),t("PEFX_Final",function(t){function a(){var e;return(e=t.call(this,a.NAME)||this).postMaterialFinalPath=s.MATERIAL_PATH+"post-material-final",e}e(a,t);var n=a.prototype;return n.getRes=function(){return[{type:i,url:this.postMaterialFinalPath}]},n.setupPasses=function(t){this.addPass(t,"default",this.postMaterialFinalPath,!0,!1,!0).rta.samplerMap=["prev_rt:mainTexture"]},a}(n)).NAME="final",a._RF.pop()}}}));

System.register("chunks:///_virtual/PEFX_Glow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Layer3D.ts","./SyncWidthMainCamera.ts","./PEFX_Basic.ts","./GlobalUniformMgr.ts","./PostEFXMgr.ts","./PEFX_Depth.ts"],(function(t){"use strict";var e,r,a,n,s,i,o,l,u,c,d,m,h,P,g,_;return{setters:[function(t){e=t.inheritsLoose,r=t.createClass},function(t){a=t.cclegacy,n=t.Material,s=t.Camera,i=t.color,o=t.gfx,l=t.director,u=t.PipelineEventType},function(t){c=t.Layer3D},function(t){d=t.SyncWidthMainCamera},function(t){m=t.PEFXResources,h=t.PEFX_Base},function(t){P=t.GlobalUniformMgr},function(t){g=t.PostEFXMgr},function(t){_=t.PEFX_Depth}],execute:function(){a._RF.push({},"d07acXPfMJAd6H0c4Umw6EJ","PEFX_Glow",void 0),t("PEFX_Glow",function(t){function a(){var e;return(e=t.call(this,a.NAME)||this).matBlurXPath=m.MATERIAL_PATH+"post-material-glow-blur-x",e.matBlurYPath=m.MATERIAL_PATH+"post-material-glow-blur-y",e.matCombinePath=m.MATERIAL_PATH+"post-material-glow-combine",e}e(a,t);var h=a.prototype;return h.getRes=function(){return[{type:n,url:this.matBlurXPath},{type:n,url:this.matBlurYPath},{type:n,url:this.matCombinePath}]},h.setupPasses=function(t){var e=t,r=this.addPass(e,"grab",null,!1,!0,!0);r.node.layer=c.GLOW.mask;var a=r.node.getComponent(s);a.visibility=c.GLOW.mask,a.clearColor=i(0,0,0,0),a.clearFlags=o.ClearFlagBit.ALL,r.rtu.renderTextureUsage="glow_rt",r.node.addComponent(d);var n=P.inst;l.root.pipeline.on(u.RENDER_CAMERA_BEGIN,(function(t){t.node._id==a.node._id?(g.inst.getEfxEnable(_.NAME)&&n.setGlobalUniform("cc_fogAdd.w",1),l.getScene().emit("glow_mode")):t.node._id==g.inst.mainCamera.node._id&&(l.getScene().emit("scene_mode"),n.resetAll())}));var m=this.addPass(e,"blur_x",this.matBlurXPath,!0,!0,!0);m.rta.samplerMap=["glow_rt:mainTexture"],m.rtu.renderTextureUsage="glow_rt1",m.rtu.widthScale=m.rtu.heightScale=.25;var h=this.addPass(e,"blur_y",this.matBlurYPath,!0,!0,!0);h.rta.samplerMap=["glow_rt1:mainTexture"],h.rtu.renderTextureUsage="glow_rt2",h.rtu.widthScale=h.rtu.heightScale=.25;var p=this.addPass(e,"combine",this.matCombinePath,!0,!0,!0);p.rta.samplerMap=["prev_rt:mainTexture","glow_rt2:bluredTexture"],p.rtu.renderTextureUsage="glow_final_rt",this.blurRadius=4.5,this.blendIntensity=1.5},r(a,[{key:"blurRadius",get:function(){return this.getPassProperty("blur_x","blurRadius")},set:function(t){this.setPassProperty("blur_x","blurRadius",t),this.setPassProperty("blur_y","blurRadius",t)}},{key:"blendIntensity",get:function(){return this.getPassProperty("combine","blendFactor")},set:function(t){this.setPassProperty("combine","blendFactor",t)}}]),a}(h)).NAME="glow",a._RF.pop()}}}));

System.register("chunks:///_virtual/PEFX_GrabScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PEFX_Basic.ts","./PostEFXMgr.ts"],(function(e){"use strict";var t,r,n,s,u,c;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e.RenderTexture},function(e){s=e.PEFXResources,u=e.PEFX_Base},function(e){c=e.PostEFXMgr}],execute:function(){r._RF.push({},"88572k3F7NN6ofG/beny/rr","PEFX_GrabScene",void 0),e("PEFX_GrabScene",function(e){function r(){var t;return(t=e.call(this,r.NAME)||this).rtDepthPath=s.TEXTURE_PATH+"RT_Depth",t}t(r,e);var u=r.prototype;return u.getRes=function(){return[{type:n,url:this.rtDepthPath}]},u.setupPasses=function(e){var t=this.addPass(e,"default",null,!1,!0,!1);t.rtu.renderTextureUsage="full_scene_rt",t.rtu.camera=c.inst.mainCamera},r}(u)).NAME="grab_scene",r._RF.pop()}}}));

System.register("chunks:///_virtual/PEFX_Lut.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PEFX_Basic.ts","./PostEFXMgr.ts"],(function(t){"use strict";var e,u,r,s,l,a,i,n;return{setters:[function(t){e=t.inheritsLoose,u=t.createClass},function(t){r=t.cclegacy,s=t.Texture2D,l=t.Material},function(t){a=t.PEFXResources,i=t.PEFX_Base},function(t){n=t.PostEFXMgr}],execute:function(){r._RF.push({},"25b04b5F3BDd4q2uGKKkrYq","PEFX_Lut",void 0),t("PEFX_Lut",function(t){function r(){var e;return(e=t.call(this,r.NAME)||this).lutTexturePaths=[a.TEXTURE_PATH+"lut_colorful_8x8",a.TEXTURE_PATH+"lut_crisp_warm_8x8",a.TEXTURE_PATH+"lut_crisp_winter_8x8",a.TEXTURE_PATH+"lut_horror_blue_8x8",a.TEXTURE_PATH+"lut_soft_warming_8x8",a.TEXTURE_PATH+"lut_black_white_8x8",a.TEXTURE_PATH+"lut_thermal_8x8"],e.postMaterialLutPath=a.MATERIAL_PATH+"post-material-lut",e._index=-1,e}e(r,t);var i=r.prototype;return i.getRes=function(){for(var t=new Array(this.lutTexturePaths.length+1),e=0;e<this.lutTexturePaths.length;++e)t[e]={type:s,url:this.lutTexturePaths[e]};return t[this.lutTexturePaths.length]={type:l,url:this.postMaterialLutPath},t},i.setupPasses=function(t){var e=this.addPass(t,"default",this.postMaterialLutPath,!0,!0,!0);e.rta.samplerMap=["prev_rt:mainTexture"],e.rtu.renderTextureUsage="full_scene_lut"},i.setLut=function(t){if(t>=0&&t<this.lutTexturePaths.length){n.inst.getEfxEnable("lut")||n.inst.setEfxEnable("lut",!0);var e=this.lutTexturePaths[t],u=a.getRes(e);this.setPassProperty(0,"lutTexture",u)}else n.inst.setEfxEnable("lut",!1);this._index=t},i.getLut=function(){return this._index},u(r,[{key:"lutTexture",get:function(){return this.getPassProperty("default","lutTexture")}}]),r}(i)).NAME="lut",r._RF.pop()}}}));

System.register("chunks:///_virtual/PostEFXMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RTMgr.ts","./Layer3D.ts","./PEFX_Basic.ts"],(function(e){"use strict";var t,s,r,a,n,i,o,f,c,u,h;return{setters:[function(e){t=e.createClass},function(e){s=e.cclegacy,r=e.resources,a=e.ImageAsset,n=e.Texture2D,i=e.Node,o=e.Camera,f=e.director},function(e){c=e.RTMgr},function(e){u=e.Layer3D},function(e){h=e.PEFXResources}],execute:function(){s._RF.push({},"06a27mDcSlOgK6xkjR3/bHG","PostEFXMgr",void 0),e("PostEFXMgr",function(){function e(){this._needAdjustProblem=!0,this._openedEfxNum=0,this._postEffects=[],this._postEffectsMap=new Map,this._isReady=!1,this._root=null}var s=e.prototype;return s.getPEFX=function(e){return this._postEffectsMap[e]},s.setup=function(e,t,s){for(var o=this,f=0;f<e.length;++f){var c=new e[f];this._postEffects.push(c),this._postEffectsMap[c.name]=c}this._mainCamera=t,t.visibility|=u.GLOW.mask|u.DISTORTION.mask;for(var p=[],l=[],_=0;_<this._postEffects.length;++_){var g=this._postEffects[_].getRes();if(g)for(var v=0;v<g.length;++v){var E=g[v];l[E.url]||p.push(E.url),l[E.url]=!0}}r.load(p,(function(e,t){if(e)throw Error(e.message);for(var r=new Map,f=0;f<p.length;++f){var c=p[f],u=t[f];if(u instanceof a){var l=new n;l.image=u,r[c]=l}else r[c]=u}h.setResMap(r);for(var _=0;_<o._postEffects.length;++_){var g=o._postEffects[_],v=new i;v.active=!1,v.name=g.name,o.root.addChild(v),g._node=v,g.setupPasses(v)}o.setupLayers(),o._isReady=!0,s&&setTimeout((function(){s()}),10)}))},s.setupLayers=function(){for(var e=this,t=31,s=100,r=0;r<this._postEffects.length;++r)for(var a=this._postEffects[r],n=0;n<a.passes.length;++n){var i=a.passes[n];if(i.quad){for(;;){if(--t<0)throw new Error("out of layers.");if(u.canBeUsed(t))break}var f=u.get(t),h=i.node.getComponent(o);h&&(h.visibility=f.mask,h.priority=s++,console.log(a.name+","+i.node.name+","+h.priority)),i.node.layer=f.mask,i.quad.node.layer=f.mask}}this.refreshRTUsage(),this.applyParameters(),c.inst.setResizeCallback((function(){e.refreshRTUsage(),e.applyParameters()}))},s.applyParameters=function(){for(var e=this._postEffects.length-1;e>=0;--e){var t=this._postEffects[e];if(t.active)for(var s=0;s<t.passes.length;++s){var r=t.passes[s];r.rta&&r.rta.applyParameters()}}},s.refreshRTUsage=function(){var e=0;if(this._postEffects.forEach((function(t){t.active&&e++})),!e)return this._grabScenePEFX.active=!1,this._grabScenePEFX.active=!1,this._mainCamera.enabled=!0,void(this._finalPEFX.active=!1);this._grabScenePEFX.active=!0,this._finalPEFX.active=!0;for(var t=0;t<this._postEffects.length;++t){var s=this._postEffects[t];if(s.active)for(var r=0;r<s.passes.length;++r){var a=s.passes[r];a.rtu&&a.rtu.enabled&&(a.rtu.init(),a.rtu.assignRenderTextureToCamera())}}},s.setEfxEnable=function(e,t){var s=this.getPEFX(e);s&&(s.active=t,this.refreshRTUsage(),this.applyParameters())},s.getEfxEnable=function(e){var t=this.getPEFX(e);return!!t&&t.active},s.getPrevRT=function(e){for(var t=null,s=!1,r=0;r<this._postEffects.length;++r){var a=this._postEffects[r];if(a.active){for(var n=0;n<a.passes.length;++n)if(a.passes[n].node==e){s=!0;break}if(s)break;t=a}}if(!s)return console.log("full_scene_rt"),"full_scene_rt";var i=t.passes[t.passes.length-1];return i.rtu?i.rtu.renderTextureUsage:""},t(e,[{key:"hasPPOpened",get:function(){return!!this._needAdjustProblem&&this._openedEfxNum>1}},{key:"_finalPEFX",get:function(){return this._postEffectsMap.final}},{key:"_grabScenePEFX",get:function(){return this._postEffectsMap.grab_scene}},{key:"mainCamera",get:function(){return this._mainCamera}},{key:"root",get:function(){if(!this._root){var e=new i;e.name="$my_processor_root$",f.getScene().addChild(e),this._root=e,this._root._persistNode=!0}return this._root}}],[{key:"inst",get:function(){return this._inst||(this._inst=new e),this._inst}}]),e}())._inst=null,s._RF.pop()}}}));

System.register("chunks:///_virtual/RenderTextureUsage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RTMgr.ts"],(function(e){"use strict";var t,r,i,n,a,s,o,u,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,o=e.Camera,u=e.gfx,c=e.Component},function(e){l=e.RTMgr}],execute:function(){var h,g,d,p,f,T,m,b;a._RF.push({},"96afaH2RgRAIbiOK2Kc53PU","RenderTextureUsage",void 0);var x=s.ccclass,R=s.property;e("RenderTextureUsage",(h=x("RenderTextureUsage"),g=R({type:o}),h((f=t((p=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,i(t,"widthScale",f,n(t)),i(t,"heightScale",T,n(t)),i(t,"renderTextureUsage",m,n(t)),i(t,"camera",b,n(t)),t._created=!1,t}r(t,e);var a=t.prototype;return a.setCamera=function(e){this.camera=e,this.init(),this.node.parent&&this.node.parent.active&&this.onEnable()},a.init=function(){if(!this.renderTextureUsage)throw Error("renderTextureUsage must not be null or empty string.");this._created||l.inst.createRenderTexture(this.renderTextureUsage,this.widthScale,this.heightScale,!1,u.Format.RGBA8,u.Format.DEPTH_STENCIL),this._created=!0},a.onEnable=function(){this.camera&&(this.camera.enabled=!0,this.assignRenderTextureToCamera())},a.onDisable=function(){this.camera&&(this.camera.targetTexture=null)},a.onDestroy=function(){l.inst.unsetResizeCallback(this.assignRenderTextureToCamera.bind(this))},a.assignRenderTextureToCamera=function(){if(this.camera&&this.renderTextureUsage){var e=l.inst.getRenderTexture(this.renderTextureUsage);this.camera.targetTexture=e}},t}(c)).prototype,"widthScale",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=t(p.prototype,"heightScale",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=t(p.prototype,"renderTextureUsage",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=t(p.prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=p))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/resources",["./DepthObject.ts","./DistortionObject.ts","./GlobalUniformMgr.ts","./GlowObject.ts","./Layer3D.ts","./PEFX_Basic.ts","./PEFX_Bloom.ts","./PEFX_Depth.ts","./PEFX_Distortion.ts","./PEFX_Final.ts","./PEFX_Glow.ts","./PEFX_GrabScene.ts","./PEFX_Lut.ts","./PostEFXMgr.ts","./RTAsSampler.ts","./RTMgr.ts","./RenderTextureUsage.ts","./SyncWidthMainCamera.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/RTAsSampler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RTMgr.ts","./PostEFXMgr.ts"],(function(e){"use strict";var r,t,i,o,a,n,s,l,p,c,u,R;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,n=e._decorator,s=e.CCString,l=e.MeshRenderer,p=e.Texture2D,c=e.Component},function(e){u=e.RTMgr},function(e){R=e.PostEFXMgr}],execute:function(){var d,m,f,h,M,g,y;a._RF.push({},"374c9qo3JZL0ZDNk7y6hpwx","RTAsSampler",void 0);var T=n.ccclass,v=n.property;e("RTAsSampler",(d=T("RTAsSampler"),m=v({type:[s],tooltip:"e.g full_scene:mainTexture"}),f=v({type:l,tooltip:"model for post process."}),d((g=r((M=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return r=e.call.apply(e,[this].concat(a))||this,i(r,"samplerMap",g,o(r)),i(r,"model",y,o(r)),r}return t(r,e),r.prototype.applyParameters=function(){this.model.node.active=!0;for(var e=0;e<this.samplerMap.length;++e){var r=this.samplerMap[e].split(":"),t=r[0],i=r[1];"prev_rt"==t&&(t=R.inst.getPrevRT(this.node));var o=u.inst.getRenderTexture(t);this.model.sharedMaterial&&o&&(o.setFilters(p.Filter.LINEAR,p.Filter.LINEAR),o.setWrapMode(p.WrapMode.MIRRORED_REPEAT,p.WrapMode.MIRRORED_REPEAT),this.model.sharedMaterial.setProperty(i,o))}},r}(c)).prototype,"samplerMap",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=r(M.prototype,"model",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=M))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/RTMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,s,a;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,r=e.view,s=e.RenderTexture,a=e.size}],execute:function(){i._RF.push({},"5884foF+idEfbWSJsHB5TW0","RTMgr",void 0);var h=e("RTCreateInfo",function(){function e(){this.isFixedSize=!1,this.widthArg=0,this.heightArg=0,this.pixelFormat=0,this.depthStencilFormat=0,this.rt=null}return t(e,[{key:"size",get:function(){if(this.isFixedSize)return a(this.widthArg,this.heightArg);var e=r.getFrameSize(),t=r.getDevicePixelRatio();return a(this.widthArg*e.width*t,this.heightArg*e.height*t)}}]),e}());e("RTMgr",function(){function e(){this._rtPool=[],this._usageMap=new Map,this._resizeCallbackArr=[],this._lastFrameSize=null,this._lastFrameSize=r.getFrameSize()}var i=e.prototype;return i.getAllInuseRT=function(){return this._usageMap},i.setResizeCallback=function(e){this._resizeCallbackArr.push(e)},i.unsetResizeCallback=function(e){var t=this._resizeCallbackArr.indexOf(e);-1!=t&&this._resizeCallbackArr.splice(t,1)},i.resizeAll=function(){for(var e=[],t=0;t<this._rtPool.length;++t){var i=this._rtPool[t];i.isFixedSize||e.push(i)}for(var a in this._usageMap){var h=this._usageMap.get(a);h&&!h.isFixedSize&&e.push(h)}for(var n=r.getFrameSize(),l=0;l<e.length;++l){var g=e[l];g.rt=new s;var u=n.width*g.widthArg,o=n.height*g.heightArg;g.rt.resize(u,o)}for(var c=0;c<this._resizeCallbackArr.length;++c)this._resizeCallbackArr[c]()},i.createRenderTexture=function(e,t,i,a,n,l){var g=this._usageMap.get(e);if(g)return g.rt;var u=0,o=0;if(a)u=~~t,o=~~i;else{var c=r.getDevicePixelRatio(),d=r.getFrameSize();u=t*d.width*c,o=i*d.height*c}for(var _=0;_<this._rtPool.length;++_){var p=this._rtPool[_];if(p.widthArg==t&&p.heightArg==i&&p.isFixedSize==a&&p.pixelFormat==n&&p.depthStencilFormat==l)return this._rtPool.splice(_,1),this._usageMap.set(e,p),p.rt}var f=new s;f.reset({width:u,height:o});var v=new h;return v.rt=f,v.widthArg=t,v.heightArg=i,v.isFixedSize=a,v.pixelFormat=n,v.depthStencilFormat=l,this._usageMap.set(e,v),f},i.addRenderTexture=function(e,t,i,s,a,n,l){var g=0,u=0;if(a)g=~~i,u=~~s;else{var o=r.getDevicePixelRatio(),c=r.getFrameSize();g=i*c.width*o,u=s*c.height*o}t.resize(g,u);var d=new h;d.rt=t,d.widthArg=i,d.heightArg=s,d.isFixedSize=a,d.pixelFormat=n,d.depthStencilFormat=l,this._usageMap.set(e,d)},i.getRenderTexture=function(e){var t=this._usageMap.get(e);return t?t.rt:null},i.releaseRenderTexture=function(e){var t=this._usageMap.get(e);t&&(this._rtPool.push(t),this._usageMap.delete(e))},i.update=function(){var e=r.getFrameSize();e.width==this._lastFrameSize.width&&e.height==this._lastFrameSize.height||(this.resizeAll(),this._lastFrameSize=e)},t(e,null,[{key:"inst",get:function(){return this._inst||(this._inst=new e),this._inst}}]),e}())._inst=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/SyncWidthMainCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PostEFXMgr.ts"],(function(a){"use strict";var t,i,r,e,n,o;return{setters:[function(a){t=a.inheritsLoose},function(a){i=a.cclegacy,r=a._decorator,e=a.CameraComponent,n=a.Component},function(a){o=a.PostEFXMgr}],execute:function(){var s;i._RF.push({},"27eddyKWstNTISynT/1K77Z","SyncWidthMainCamera",void 0);var m=r.ccclass;r.property,a("SyncWidthMainCamera",m("SyncWidthMainCamera")(s=function(a){function i(){for(var t,i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];return(t=a.call.apply(a,[this].concat(r))||this).mainCamera=null,t}t(i,a);var r=i.prototype;return r.start=function(){var a=o.inst.mainCamera;if(a){this.mainCamera=a;var t=this.node.getComponent(e);t&&this.mainCamera&&(t.projection=this.mainCamera.projection,t.fovAxis=this.mainCamera.fovAxis,t.fov=this.mainCamera.fov,t.orthoHeight=this.mainCamera.orthoHeight,t.near=this.mainCamera.near,t.far=this.mainCamera.far,t.aperture=this.mainCamera.aperture,t.iso=this.mainCamera.iso,t.shutter=this.mainCamera.shutter,t.rect=this.mainCamera.rect)}},r.lateUpdate=function(a){if(this.mainCamera){var t=this.mainCamera.node;this.node.setWorldPosition(t.worldPosition),this.node.setWorldRotation(t.worldRotation),this.node.setWorldScale(t.worldScale)}},i}(n))||s);i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/resources', 'chunks:///_virtual/resources'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});